<!doctype html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="Stay Hungry. Stay Foolish.">
<meta property="og:type" content="website">
<meta property="og:title" content="不要急，不要怕">
<meta property="og:url" content="http://yoursite.com/child/page/3/index.html">
<meta property="og:site_name" content="不要急，不要怕">
<meta property="og:description" content="Stay Hungry. Stay Foolish.">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="不要急，不要怕">
<meta name="twitter:description" content="Stay Hungry. Stay Foolish.">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/child/page/3/"/>





  <title> 不要急，不要怕 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">不要急，不要怕</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">Life needs curiosity and passion.</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/child/2016/10/10/贝塞尔曲线基础/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="hapii">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://tva1.sinaimg.cn/crop.0.14.750.750.180/005PluWajw8fahgdnankoj30ku0lnjsd.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="不要急，不要怕">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="不要急，不要怕" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/10/贝塞尔曲线基础/" itemprop="url">
                  贝塞尔曲线基础
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-10-10T14:13:00+08:00">
                2016-10-10
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2016/10/10/贝塞尔曲线基础/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/10/10/贝塞尔曲线基础/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/10/10/贝塞尔曲线基础/" class="leancloud_visitors" data-flag-title="贝塞尔曲线基础">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="一些废话"><a href="#一些废话" class="headerlink" title="一些废话:"></a>一些废话:</h2><p>  前几天看了一下贝塞尔曲线，今天顺便把它发上来，因为看的资料是用swift写的，所以顺带的学了一丢丢swift，</p>
<center><br><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="http://music.163.com/outchain/player?type=2&id=25706282&auto=0&height=66"><br></iframe><br></center>

<h2 id="先定义全局变量"><a href="#先定义全局变量" class="headerlink" title="先定义全局变量:"></a>先定义全局变量:</h2><p>let label = UILabel()//控制第1条曲线的but<br>let startBut = UIButton()//起始按钮<br>let EndBut = UIButton()//终止按钮<br>let  but2 = UIButton()//控制第二条曲线的but</p>
<p>let startPoint = CGPointMake(50, 300)//起始点<br>let endPoint = CGPointMake(300, 300)//终止点<br>var controlPoint = CGPoint()//控制点1<br>var path = UIBezierPath()//初始化一个曲线<br>var layer = CAShapeLayer()//CAShapeLayer是CALayer的子类，是Quare 2D中对图层操作最基本的一个扩展。CAShapeLayer 是个神奇的东西，给它一个path它就能变成你想要的形状，它还有很多可以玩的地方。综合使用可以组合成不同的动画，比如下面这样通过它，我们可以绘制各种图形，特别是不规则图形。   每个CAShapeLayer对象都代表着将要被渲染到屏幕上的形状(shape)。具体的形状由其path(类型为CGPathRef)属性指定，形状可以是任意的，比如星形、菱形balabala</p>
<p>var controlPoint2 = CGPoint()<br>var path2 = UIBezierPath()//初始化一个曲线<br>var layer2 = CAShapeLayer()</p>
<h2 id="初始化曲线和按钮，并添加手势"><a href="#初始化曲线和按钮，并添加手势" class="headerlink" title="初始化曲线和按钮，并添加手势:"></a>初始化曲线和按钮，并添加手势:</h2><p>func HowToDrawALine() {</p>
<p>let pan = UIPanGestureRecognizer(target:self,action:#selector(panDid(<em>:)))<br>let startPan = UIPanGestureRecognizer(target:self,action:#selector(startPanDid(</em>:)))<br>let endPan = UIPanGestureRecognizer(target:self,action:#selector(endPanDid(<em>:)))<br>let pan2 = UIPanGestureRecognizer(target:self,action:#selector(panDidTwo(</em>:)))</p>
<p>//起始按钮<br>startBut.frame = CGRectMake(100, 200, 40, 40)<br>startBut .setTitle(“起”, forState: UIControlState.Normal)<br>startBut.addGestureRecognizer(startPan)<br>startBut.backgroundColor = UIColor.purpleColor()<br>view.addSubview(startBut)<br>//结束按钮<br>EndBut.frame = CGRectMake(100, 300, 40, 40)<br>EndBut .setTitle(“终”, forState: UIControlState.Normal)<br>EndBut.addGestureRecognizer(endPan)<br>EndBut.backgroundColor = UIColor.purpleColor()<br>view.addSubview(EndBut)</p>
<p>label.addGestureRecognizer(pan)<br>label.frame = CGRectMake(200, 200, 50, 50)<br>label.text = “控1”<br>label.backgroundColor  = UIColor .redColor()<br>//有些控件默认会关闭用户交互；<br>label.userInteractionEnabled = true<br>view .addSubview(label)</p>
<p>but2.frame = CGRectMake(50, 300, 40, 40)<br>but2.addGestureRecognizer(pan2)<br>but2 .setTitle(“控2”, forState: UIControlState.Normal)<br>but2.backgroundColor = UIColor.orangeColor()<br>view.addSubview(but2)</p>
<p>// let controlPoint1 = CGPointMake(170, 400)//控制点2,<br>// path.addCurveToPoint(endPoint, controlPoint1: controlPoint, controlPoint2: controlPoint2)//已两个控制点画</p>
<p>layer.fillColor = UIColor.redColor().CGColor<br>layer.strokeColor = UIColor.blackColor().CGColor</p>
<p>layer2.fillColor = UIColor.redColor().CGColor<br>layer2.strokeColor = UIColor.redColor().CGColor</p>
<p>}</p>
<h2 id="起始点，终止点和两个控制按钮的手势"><a href="#起始点，终止点和两个控制按钮的手势" class="headerlink" title="起始点，终止点和两个控制按钮的手势:"></a>起始点，终止点和两个控制按钮的手势:</h2><p>//第一个控制点的手势<br>func panDid(recognizer:UIPanGestureRecognizer){</p>
<p>let point=recognizer.locationInView(self.view)<br>//设置矩形的位置<br>label.center=point</p>
<p>path .removeAllPoints()<br>layer.removeFromSuperlayer()</p>
<p>controlPoint = CGPointMake(label.center.x, label.center.y)<br>path.moveToPoint(startBut.center)//开始点<br>path.addQuadCurveToPoint(EndBut.center, controlPoint: controlPoint) //以一个控制点个点画一段曲线<br>layer.path = path.CGPath</p>
<p>view.layer.addSublayer(layer)</p>
<p>}<br>//第二个控制点的手势<br>func panDidTwo(recognizer:UIPanGestureRecognizer){</p>
<p>let point=recognizer.locationInView(self.view)<br>//设置矩形的位置<br>but2.center=point</p>
<p>path2 .removeAllPoints()<br>layer2.removeFromSuperlayer()</p>
<p>controlPoint2 = CGPointMake(but2.center.x, but2.center.y)<br>path2.moveToPoint(startBut.center)//开始点<br>path2.addQuadCurveToPoint(EndBut.center, controlPoint: controlPoint2) //以一个控制点个点画一段曲线<br>layer2.path = path2.CGPath</p>
<p>view.layer.addSublayer(layer2)</p>
<p>}<br>//起始点的手势<br>func startPanDid(recognizer:UIPanGestureRecognizer){</p>
<p>let point=recognizer.locationInView(self.view)<br>//设置矩形的位置<br>startBut.center=point</p>
<p>//移除图层<br>path .removeAllPoints()<br>layer.removeFromSuperlayer()<br>path2.removeAllPoints()<br>layer2.removeAllAnimations()</p>
<p>controlPoint = CGPointMake(label.center.x, label.center.y)<br>path.moveToPoint(startBut.center)//开始点<br>path.addQuadCurveToPoint(EndBut.center, controlPoint: controlPoint) //以一个控制点个点画一段曲线<br>layer.path = path.CGPath</p>
<p>controlPoint2 = CGPointMake(but2.center.x, but2.center.y)<br>path2.moveToPoint(startBut.center)//开始点<br>path2.addQuadCurveToPoint(EndBut.center, controlPoint: controlPoint2) //以一个控制点个点画一段曲线<br>layer2.path = path2.CGPath</p>
<p>view.layer.addSublayer(layer)<br>view.layer.addSublayer(layer2)</p>
<p>}<br>//终止点的手势<br>func endPanDid(recognizer:UIPanGestureRecognizer){</p>
<p>let point=recognizer.locationInView(self.view)<br>//设置矩形的位置<br>EndBut.center=point</p>
<p>path .removeAllPoints()<br>layer.removeFromSuperlayer()</p>
<p>path2.removeAllPoints()<br>layer2.removeAllAnimations()</p>
<p>controlPoint = CGPointMake(label.center.x, label.center.y)<br>path.moveToPoint(startBut.center)//开始点<br>path.addQuadCurveToPoint(EndBut.center, controlPoint: controlPoint) //以一个控制点个点画一段曲线<br>layer.path = path.CGPath</p>
<p>controlPoint2 = CGPointMake(but2.center.x, but2.center.y)<br>path2.moveToPoint(startBut.center)//开始点<br>path2.addQuadCurveToPoint(EndBut.center, controlPoint: controlPoint2) //以一个控制点个点画一段曲线<br>layer2.path = path2.CGPath</p>
<p>view.layer.addSublayer(layer)<br>view.layer.addSublayer(layer2)</p>
<p>}</p>
<h2 id="结尾"><a href="#结尾" class="headerlink" title="结尾:"></a>结尾:</h2><p>拉扯4个点，就可以随便拉扯曲线了，事实上就是改变了4个点的位置，而曲线又是根据点画的。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">


      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/child/2016/10/10/NSUserDefaults须知/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="hapii">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://tva1.sinaimg.cn/crop.0.14.750.750.180/005PluWajw8fahgdnankoj30ku0lnjsd.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="不要急，不要怕">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="不要急，不要怕" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/10/NSUserDefaults须知/" itemprop="url">
                  NSUserDefaults须知
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-10-10T13:43:40+08:00">
                2016-10-10
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2016/10/10/NSUserDefaults须知/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/10/10/NSUserDefaults须知/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/10/10/NSUserDefaults须知/" class="leancloud_visitors" data-flag-title="NSUserDefaults须知">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="NSUserDefaults简介"><a href="#NSUserDefaults简介" class="headerlink" title="NSUserDefaults简介:"></a>NSUserDefaults简介:</h2><pre><code>NSUserDefaults类提供了一个与默认系统进行交互的编程接口。NSUserD efaults对象是用来保存、恢复应用程序相关的偏好设置、配置数据等等。默认系统允许应用程序自定义它的行为去迎合用户的喜好。你可以在程序运行的时候从用户默认的数据库中读取程序的设置，同时NSUserDefaults的缓存避免了在每次读取数据时候都打开用户默认数据库的操作。可以通过调用synchroni ze方法来使内存中的缓存与用户默认系统进行同步。NSUserDefaults类提供了非常方便的方法来读写常用的类型，常用的方法有:setBool:forKey、setFloat :forKey、setInteger:forKey、setObject:forKey、setDouble:forKey、setURL:forKey,具体使用哪个方法取决于要存储的数据类型。其中,方法setObject: forKey用于存储NSString、NSDate、NSArry、NSDictionary等复合对象类型。
</code></pre><h2 id="常见的使用说明"><a href="#常见的使用说明" class="headerlink" title="常见的使用说明:"></a>常见的使用说明:</h2><pre><code>存数据
</code></pre><p>NSUserDefaults *standardUserDefaults = [NSUserDefaults standardUserDefaults];<br>if (standardUserDefaults)<br>{<br>[standardUserDefaults setObject:value forKey:key];<br>[standardUserDefaults synchronize];<br>}</p>
<pre><code>取数据：
</code></pre><p>NSArray<em> val = nil;<br>NSUserDefaults </em>standardUserDefaults = [NSUserDefaults standardUserDefaults];<br>if (standardUserDefaults) {<br>val = [standardUserDefaults arrayForKey:key];<br>}<br>其他的类型也差不多，这里就不粘贴复制了。。</p>
<h2 id="如何查看NSUserDefaults里的数据"><a href="#如何查看NSUserDefaults里的数据" class="headerlink" title="如何查看NSUserDefaults里的数据:"></a>如何查看NSUserDefaults里的数据:</h2><p>NSString <em>homePath = NSHomeDirectory();<br>//拼接路径<br> NSString </em>path = [homePath stringByAppendingPathComponent:@”Library/Preferences”];<br>以上路径就是NSUserDefaults的存放路径</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">


      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/child/2016/07/15/踏过的坑/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="hapii">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://tva1.sinaimg.cn/crop.0.14.750.750.180/005PluWajw8fahgdnankoj30ku0lnjsd.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="不要急，不要怕">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="不要急，不要怕" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/15/踏过的坑/" itemprop="url">
                  ：日常bug记录
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-07-15T18:00:58+08:00">
                2016-07-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/日常Bug/" itemprop="url" rel="index">
                    <span itemprop="name">日常Bug</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2016/07/15/踏过的坑/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/07/15/踏过的坑/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/07/15/踏过的坑/" class="leancloud_visitors" data-flag-title="：日常bug记录">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>前几天在上传一个个人项目的时候老是报这个错误，</p>
<pre><code>ERROR ITMS-90096: &quot;Your binary is not optimized for iPhone 5 - New iPhone apps and app updates submitted must support the 4-inch display on iPhone 5 and must include a launch image referenced in the Info.plist under UILaunchImages with a UILaunchImageSize value set to {320, 568}. Launch images must be PNG files and located at the top-level of your bundle, or provided within each .lproj folder if you localize your launch images. Learn more about iPhone 5 support and app launch images by reviewing the &apos;iOS Human Interface Guidelines&apos; at &apos;https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/MobileHIG/IconsImages/IconsImages.html#//apple_ref/doc/uid/TP40006556-CH14-SW5&apos; and the &apos;iOS App Programming Guide&apos; at &apos;https://developer.apple.com/library/ios/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/App-RelatedResources/App-RelatedResources.html#//apple_ref/doc/uid/TP40007072-CH6-SW12&apos;.&quot;
</code></pre><p>默认的 LaunchImage 我都已经加完了，还报这个错误。</p>
<p>解决的方法是：添加一个图片名称为 Default-568h@2x.png 的png图片，大小是 640 × 1136 就可以了。</p>
<h2 id="iOS-10-不提示「是否允许应用访问数据」"><a href="#iOS-10-不提示「是否允许应用访问数据」" class="headerlink" title="iOS 10 不提示「是否允许应用访问数据」:"></a>iOS 10 不提示「是否允许应用访问数据」:</h2><p>由于大陆相关部门出台的新规定指出，应用在未经用户允许的前提下，系统不能授予其使用联网、获取定位的功能。Apple 在 iOS 10 操作系统中加入了关于应用使用数据的授权弹窗提示，用户在 iOS 10 系统中第一次打开应用时，会被要求对于是否授予应用联网权限进行选择。<br><img src="http://i1.piimg.com/567571/9d2e87a2cd4c4304.jpg" alt="就像这样"></p>
<p>如果你在 iOS 10 操作系统中安装了一个新应用或者第一次打开某个应用时发现应用出现无法访问网络无法刷新数据的情况，并且在蜂窝数据网络的设置项中无法找到相应应用的联网权限设置选项，出现如下的这种情况，恭喜你，你中招了。<br><img src="http://i1.piimg.com/567571/545a8322b61e9e50.jpg" alt="连不上网"><br>而且点到设置，app对应的权限下也没有“无限数据”这个选项</p>
<h2 id="解决方案"><a href="#解决方案" class="headerlink" title="####解决方案:"></a>####解决方案:</h2><p>由于这个 Bug 是系统级别的，所以暂时没有方便的解决方案。</p>
<p>下面总结两条目前可行的解决方案：</p>
<p>方案一： 重启手机再打开有相关联网问题的应用<br>对于此问题可能带来的问题有：如果你有多个应用具有网络访问问题，你可能需要多次重启设备后依次打开相关应用，因为在每次重启设备之后，系统貌似只能修正一个应用的联网访问请求，关于此问题还需要进一步求证。</p>
<p>方案二：更改 iOS 10 中的蜂窝网络访问权限设置<br>除了重启设别以外，你也可以尝试在「设置-通用-蜂窝移动网络-使用无线局域网与蜂窝移动的应用」选项中更改任意应用的联网权限设置后再恢复原先设置选项，完成操作后再次打开相关问题应用，也可以解决这一问题。</p>
<p>方案三：临时启动无线局域网助理<br>在「设置」-「蜂窝移动网络」打开「无线局域网助理」选项，之后再打开相关问题应用也可以解决这个问题。</p>
<p>修复问题后即可关闭「无线局域网助理」选项。<br><a href="http://www.jianshu.com/p/28e8919a2cae" target="_blank" rel="external">原文地址</a></p>
<h2 id="app被拒后提交材料踏过的坑"><a href="#app被拒后提交材料踏过的坑" class="headerlink" title="app被拒后提交材料踏过的坑:"></a>app被拒后提交材料踏过的坑:</h2><p>被拒的理由balibalibali~~：</p>
<pre><code>Your app includes features for streaming TV channels, the content of which may be copyrighted. The use of third-party copyrighted materials requires documented evidence of your right to use such content in your app.

We&apos;ve attached screenshot(s) for your reference.

Pursuant to the terms of this agreement, you represent and warrant that your app does not infringe the rights of another party, and that you are responsible for any liability to Apple because of a claim that your app infringes another party&apos;s rights. Moreover, we may reject or remove your app for any reason, at our sole discretion.

Next Steps

Please provide documentary evidence of rights to use this content and features. Once Legal has reviewed your documentation and confirms its validity, we will proceed with the review of your app.

Alternatively, please remove these features and content from your app and its metadata.

Screenshot 0104 113900.png
Screenshot 0104 113725.png
</code></pre><p><img src="http://p1.bqimg.com/567571/11a1980ccd87c787.png" alt="点击附加文件传图片"><br>这里⚠️⚠️,上传的图片名字不能有汉字，不然传不上去～～</p>
<h2 id="linker-command-failed-with-exit-code-1"><a href="#linker-command-failed-with-exit-code-1" class="headerlink" title="linker command failed with exit code 1:"></a>linker command failed with exit code 1:</h2><p>这个报错太恶心了，原因也太多，纪录几个我的解决方案：<br>1.在编译工程时，有时会遇到类似“ld: library not found for -l….”的错误提示。</p>
<p>原因是你的某个库的连接引用有问题，工程在编译时找不到需要的链接库而导致的。</p>
<p>解决的办法就是在项目的target里,选中Link Binary With Libraries 里的.a或framework 取消再加入,就可以了<br>或者在工程的Target中选中要执行编译的某个target,然后“get info”,打开Build设置页面，<br>在“Library Search Path”中添加缺失链接库的所在文件夹的路径或$(inherited)即可</p>
<p>ld:warning:directory not found option 的问题可能是framework search paths 还有Library Search Paths 里面并没有这个路径,删除即可</p>
<h2 id="MJRefresh的bug"><a href="#MJRefresh的bug" class="headerlink" title="MJRefresh的bug:"></a>MJRefresh的bug:</h2><p><a href="https://github.com/CoderMJLee/MJRefresh/issues/746" target="_blank" rel="external">点这里</a><br>语言国际化时英文是报错，难怪毕业设计每次打回来都说是ipv6或者是秒退～～恍然大悟。。</p>
<h2 id="屏幕旋转相关"><a href="#屏幕旋转相关" class="headerlink" title="屏幕旋转相关:"></a>屏幕旋转相关:</h2><p>在项目中难免要碰到屏幕旋转，每次要卡那么一下，这次是死活不走下面这个方法了，</p>
<pre><code>- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
</code></pre><p>原来是因为VIewController跳转时resenting view controllers on detached view controllers is discouraged，<br>把跳转修改：</p>
<pre><code>[wself presentViewController:navi animated:YES     completion:^{
   }];
</code></pre><p>改为</p>
<pre><code>[wself.view.window.rootViewController presentViewController:navi animated:YES completion:nil];
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">


      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/child/2015/10/20/button不能点击的原因/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="hapii">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://tva1.sinaimg.cn/crop.0.14.750.750.180/005PluWajw8fahgdnankoj30ku0lnjsd.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="不要急，不要怕">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="不要急，不要怕" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/10/20/button不能点击的原因/" itemprop="url">
                  button不能点击的原因
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2015-10-20T11:19:37+08:00">
                2015-10-20
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2015/10/20/button不能点击的原因/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/10/20/button不能点击的原因/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2015/10/20/button不能点击的原因/" class="leancloud_visitors" data-flag-title="button不能点击的原因">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="userInteractionEnabled"><a href="#userInteractionEnabled" class="headerlink" title="userInteractionEnabled :"></a>userInteractionEnabled :</h2><p>父视图的userInteractionEnabled没开，比如把一个按钮放到了一个imageVIew上，如果按钮不能被点击，不妨试一下<br>Img.userInteractionEnabled = YES 这个方法，这也是最常见的一个原因。</p>
<h2 id="父视图frame有问题"><a href="#父视图frame有问题" class="headerlink" title="父视图frame有问题 :"></a>父视图frame有问题 :</h2><p>UIButton不能响应点击事件的另一个原因是和UIButton的父视图有关系。如果父视图frame是CGRectZero，或者UIButton超出父视图，UIButton还是会显示的，但诡异的是UIButton是不会响应点击事件的，所以要调整父视图的frame或者UIButton位置。</p>
<h2 id="被其他视图盖住了"><a href="#被其他视图盖住了" class="headerlink" title="被其他视图盖住了:"></a>被其他视图盖住了:</h2><pre><code>刚才在做高度自适应的时候碰到了这个问题，userInteractionEnabled也开了，还是不行，
</code></pre><p>打开图层一看居然是cellContentView遮住了， 点到xib一看cell目录下居然没有Content View,因为是后来建的xib又加的关联，所以创建的时候没有自己生成Content View，没办法了，只好再加上Content View重拖一遍了。<br>弄好再试果然好了。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">


      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/child/2015/09/21/UItableVIew的性能优化/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="hapii">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://tva1.sinaimg.cn/crop.0.14.750.750.180/005PluWajw8fahgdnankoj30ku0lnjsd.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="不要急，不要怕">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="不要急，不要怕" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/09/21/UItableVIew的性能优化/" itemprop="url">
                  UItableView的性能优化
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2015-09-21T20:21:35+08:00">
                2015-09-21
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2015/09/21/UItableVIew的性能优化/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/09/21/UItableVIew的性能优化/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2015/09/21/UItableVIew的性能优化/" class="leancloud_visitors" data-flag-title="UItableView的性能优化">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>这个是转载于CocoaChina的一篇原文：<br>UITableView最核心的思想就是UITableViewCell的重用机制。简单的理解就是：UITableView只会创建一屏幕（或一屏幕多一点）的UITableViewCell，其他都是从中取出来重用的。每当Cell滑出屏幕时，就会放入到一个集合（或数组）中（这里就相当于一个重用池），当要显示某一位置的Cell时，会先去集合（或数组）中取，如果有，就直接拿来显示；如果没有，才会创建。这样做的好处可想而知，极大的减少了内存的开销。</p>
<p>知道UITableViewCell的重用原理后，我们来看看UITableView的回调方法。UITableView最主要的两个回调方法是tableView:cellForRowAtIndexPath:和tableView:heightForRowAtIndexPath:。理想上我们是会认为UITableView会先调用前者，再调用后者，因为这和我们创建控件的思路是一样的，先创建它，再设置它的布局。但实际上却并非如此，我们都知道，UITableView是继承自UIScrollView的，需要先确定它的contentSize及每个Cell的位置，然后才会把重用的Cell放置到对应的位置。所以事实上，UITableView的回调顺序是先多次调用tableView:heightForRowAtIndexPath:以确定contentSize及Cell的位置，然后才会调用tableView:cellForRowAtIndexPath:，从而来显示在当前屏幕的Cell。</p>
<p>举个例子来说：如果现在要显示100个Cell，当前屏幕显示5个。那么刷新（reload）UITableView时，UITableView会先调用100次tableView:heightForRowAtIndexPath:方法，然后调用5次tableView:cellForRowAtIndexPath:方法；滚动屏幕时，每当Cell滚入屏幕，都会调用一次tableView:heightForRowAtIndexPath:、tableView:cellForRowAtIndexPath:方法。</p>
<p>看到这里，想必大伙也都能隐约察觉到，UITableView优化的首要任务是要优化上面两个回调方法。事实也确实如此，下面按照我探讨进阶的过程，来研究如何优化：</p>
<p>优化探索，项目拿到手时代码是这样：</p>
<ul>
<li>(UITableViewCell <em>)tableView:(UITableView </em>)tableView cellForRowAtIndexPath:(NSIndexPath <em>)indexPath {<br>ContacterTableCell </em>cell = [tableView dequeueReusableCellWithIdentifier:@”ContacterTableCell”];<br>if (!cell) {<br>cell = (ContacterTableCell <em>)[[[NSBundle mainBundle] loadNibNamed:@”ContacterTableCell” owner:self options:nil] lastObject];<br>}<br>NSDictionary </em>dict = self.dataList[indexPath.row];<br>[cell setContentInfo:dict];<br>return cell;<br>}</li>
<li>(CGFloat)tableView:(UITableView <em>)tableView heightForRowAtIndexPath:(NSIndexPath </em>)indexPath {<br>UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];<br>return cell.frame.size.height;<br>}<br>看到这段代码，对于刚毕业的我来说，觉得还是蛮巧妙的，但巧归巧，当Cell非常复杂的时候，直接卡出翔了。。。特别是在我的Touch4上，这我能忍？！好吧，依据上面UITableView原理的分析，我们先来分析它为什么卡？</li>
</ul>
<p>这样写，在Cell赋值内容的时候，会根据内容设置布局，当然也就可以知道Cell的高度，想想如果1000行，那就会调用1000+页面Cell个数次tableView:(UITableView <em>)tableView cellForRowAtIndexPath:(NSIndexPath </em>)indexPath方法，而我们对Cell的处理操作，都是在这个方法里的！什么赋值、布局等等。开销自然很大，这种方案Pass。。。改进代码。</p>
<p>改进代码后：</p>
<ul>
<li>(CGFloat)tableView:(UITableView <em>)tableView heightForRowAtIndexPath:(NSIndexPath </em>)indexPath {<br>NSDictionary *dict = self.dataList[indexPath.row];<br>return [ContacterTableCell cellHeightOfInfo:dict];<br>}<br>思路是把赋值和计算布局分离。这样让tableView:cellForRowAtIndexPath:方法只负责赋值，tableView:heightForRowAtIndexPath:方法只负责计算高度。注意：两个方法尽可能的各司其职，不要重叠代码！两者都需要尽可能的简单易算。Run一下，会发现UITableView滚动流畅了很多。。。</li>
</ul>
<p>基于上面的实现思路，我们可以在获得数据后，直接先根据数据源计算出对应的布局，并缓存到数据源中，这样在tableView:heightForRowAtIndexPath:方法中就直接返回高度，而不需要每次都计算了。</p>
<ul>
<li>(CGFloat)tableView:(UITableView <em>)tableView heightForRowAtIndexPath:(NSIndexPath </em>)indexPath {<br>NSDictionary *dict = self.dataList[indexPath.row];<br>CGRect rect = [dict[@”frame”] CGRectValue];<br>return rect.frame.height;<br>}<br>其实上面的改进方法并不是最佳方案，但基本能满足简单的界面！记得开头我的任务吗？像朋友圈那样的图文混排，这种方案还是扛不住的！我们需要进入更深层次的探究：自定义Cell的绘制。</li>
</ul>
<p>我们在Cell上添加系统控件的时候，实质上系统都需要调用底层的接口进行绘制，当我们大量添加控件时，对资源的开销也会很大，所以我们可以索性直接绘制，提高效率。是不是说的很抽象？废话不多说，直接上代码：</p>
<p>首先需要给自定义的Cell添加draw方法，（当然也可以重写drawRect）然后在方法体中实现：</p>
<p>//异步绘制<br>dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{<br>CGRect rect = [_data[@”frame”] CGRectValue];<br>UIGraphicsBeginImageContextWithOptions(rect.size, YES, 0);<br>CGContextRef context = UIGraphicsGetCurrentContext();<br>//整个内容的背景<br>[[UIColor colorWithRed:250/255.0 green:250/255.0 blue:250/255.0 alpha:1] set];<br>CGContextFillRect(context, rect);<br>//转发内容的背景<br>if ([_data valueForKey:@”subData”]) {<br>[[UIColor colorWithRed:243/255.0 green:243/255.0 blue:243/255.0 alpha:1] set];<br>CGRect subFrame = [_data[@”subData”][@”frame”] CGRectValue];<br>CGContextFillRect(context, subFrame);<br>[[UIColor colorWithRed:200/255.0 green:200/255.0 blue:200/255.0 alpha:1] set];<br>CGContextFillRect(context, CGRectMake(0, subFrame.origin.y, rect.size.width, .5));<br>}</p>
<p>{<br>//名字<br>float leftX = SIZE_GAP_LEFT+SIZE_AVATAR+SIZE_GAP_BIG;<br>float x = leftX;<br>float y = (SIZE_AVATAR-(SIZE_FONT_NAME+SIZE_FONT_SUBTITLE+6))/2-2+SIZE_GAP_TOP+SIZE_GAP_SMALL-5;<br>[_data[@”name”] drawInContext:context withPosition:CGPointMake(x, y) andFont:FontWithSize(SIZE_FONT_NAME)<br>andTextColor:[UIColor colorWithRed:106/255.0 green:140/255.0 blue:181/255.0 alpha:1]<br>andHeight:rect.size.height];<br>//时间+设备<br>y += SIZE_FONT_NAME+5;<br>float fromX = leftX;<br>float size = [UIScreen screenWidth]-leftX;<br>NSString <em>from = [NSString stringWithFormat:@”%@  %@”, _data[@”time”], _data[@”from”]];<br>[from drawInContext:context withPosition:CGPointMake(fromX, y) andFont:FontWithSize(SIZE_FONT_SUBTITLE)<br>andTextColor:[UIColor colorWithRed:178/255.0 green:178/255.0 blue:178/255.0 alpha:1]<br>andHeight:rect.size.height andWidth:size];<br>}<br>//将绘制的内容以图片的形式返回，并调主线程显示<br>UIImage </em>temp = UIGraphicsGetImageFromCurrentImageContext();<br>UIGraphicsEndImageContext();<br>dispatch_async(dispatch_get_main_queue(), ^{<br>if (flag==drawColorFlag) {<br>postBGView.frame = rect;<br>postBGView.image = nil;<br>postBGView.image = temp;<br>}<br>}<br>//内容如果是图文混排，就添加View，用CoreText绘制<br>[self drawText];<br>}}<br>上述代码只贴出来部分功能，但大体的思路都是一样的，各个信息都是根据之前算好的布局进行绘制的。这里是需要异步绘制，但如果在重写drawRect方法就不需要用GCD异步线程了，因为drawRect本来就是异步绘制的。对于图文混排的绘制，可以移步Google，研究下CoreText，这块内容太多了，不便展开。</p>
<p>好了，至此，我们又让UITableView的效率提高了一个等级！但我们的步伐还远远不止这些，下面我们还可以从UIScrollView的角度出发，再次找到突破口。</p>
<p>滑动UITableView时，按需加载对应的内容</p>
<p>直接上代码：</p>
<p>//按需加载 - 如果目标行与当前行相差超过指定行数，只在目标滚动范围的前后指定3行加载。</p>
<ul>
<li>(void)scrollViewWillEndDragging:(UIScrollView <em>)scrollView withVelocity:(CGPoint)velocity targetContentOffset:(inout CGPoint </em>)targetContentOffset{<br>NSIndexPath <em>ip = [self indexPathForRowAtPoint:CGPointMake(0, targetContentOffset-&gt;y)];<br>NSIndexPath </em>cip = [[self indexPathsForVisibleRows] firstObject];<br>NSInteger skipCount = 8;<br>if (labs(cip.row-ip.row)&gt;skipCount) {<br>NSArray <em>temp = [self indexPathsForRowsInRect:CGRectMake(0, targetContentOffset-&gt;y, self.width, self.height)];<br>NSMutableArray </em>arr = [NSMutableArray arrayWithArray:temp];<br>if (velocity.y&lt;0) {<br>NSIndexPath *indexPath = [temp lastObject];<br>if (indexPath.row+33) {<br>[arr addObject:[NSIndexPath indexPathForRow:indexPath.row-3 inSection:0]];<br>[arr addObject:[NSIndexPath indexPathForRow:indexPath.row-2 inSection:0]];<br>[arr addObject:[NSIndexPath indexPathForRow:indexPath.row-1 inSection:0]];<br>}<br>}<br>[needLoadArr addObjectsFromArray:arr];<br>}<br>}<br>记得在tableView:cellForRowAtIndexPath:方法中加入判断：</li>
</ul>
<p>if (needLoadArr.count&gt;0&amp;&amp;[needLoadArr indexOfObject:indexPath]==NSNotFound) {<br>[cell clear];<br>return;<br>}<br>滚动很快时，只加载目标范围内的Cell，这样按需加载，极大的提高流畅度。</p>
<p>写了这么多，也差不多该来个总结了！UITableView的优化主要从三个方面入手：</p>
<p>提前计算并缓存好高度（布局），因为heightForRowAtIndexPath:是调用最频繁的方法；<br>异步绘制，遇到复杂界面，遇到性能瓶颈时，可能就是突破口；<br>滑动时按需加载，这个在大量图片展示，网络加载的时候很管用！（SDWebImage已经实现异步加载，配合这条性能杠杠的）。<br>除了上面最主要的三个方面外，还有很多几乎大伙都很熟知的优化点：</p>
<p>正确使用reuseIdentifier来重用Cells<br>尽量使所有的view opaque，包括Cell自身<br>尽量少用或不用透明图层<br>如果Cell内现实的内容来自web，使用异步加载，缓存请求结果<br>减少subviews的数量<br>在heightForRowAtIndexPath:中尽量不使用cellForRowAtIndexPath:，如果你需要用到它，只用一次然后缓存结果<br>尽量少用addView给Cell动态添加View，可以初始化时就添加，然后通过hide来控制是否显示<br>尾巴</p>
<p>肯定很多人会非常好奇，为什么我都是手动用代码创建Cell的？现在主流不都是Xib、Storyboard什么的嘛？我的回答是：要想提高效率，还是手动写有用！抛开Xib、Storyboard需要系统自动转码，给系统多加了一层负担不谈，自定义Cell的绘制更是无从下手，所以，在我看来，复杂的需要高效的界面，还是手动写代码吧！！！</p>
<p>最后如果你们的项目都是用的Xib、Storyboard，并需要优化UITableView的话，sunnyxx大神提出了好的方案：<a href="http://blog.sunnyxx.com/2015/05/17/cell-height-calculation/" target="_blank" rel="external">http://blog.sunnyxx.com/2015/05/17/cell-height-calculation/</a> 大伙可以自行研究研究。</p>
<p>知识是需要不断学习的，作为刚上路的我，如果有什么理解不到位的，欢迎大伙留言指正，如果你有什么更牛逼的想法，希望一起交流交流。</p>
<p>～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～<br>这是太阳神的：</p>
<p>这篇总结你可以读到：</p>
<p>UITableView高度计算和估算的机制<br>不同iOS系统在高度计算上的差异<br>iOS8 self-sizing cell<br>UITableView+FDTemplateLayoutCell如何用一句话解决高度问题<br>UITableView+FDTemplateLayoutCell中对RunLoop的使用技巧<br>UITableViewCell高度计算</p>
<p>rowHeight</p>
<p>UITableView是我们再熟悉不过的视图了，它的 delegate 和 data source 回调不知写了多少次，也不免遇到 UITableViewCell 高度计算的事。UITableView 询问 cell 高度有两种方式。<br>一种是针对所有 Cell 具有固定高度的情况，通过：</p>
<p>self.tableView.rowHeight = 88;<br>上面的代码指定了一个所有 cell 都是 88 高度的 UITableView，对于定高需求的表格，强烈建议使用这种（而非下面的）方式保证不必要的高度计算和调用。rowHeight属性的默认值是 44，所以一个空的 UITableView 显示成那个样子。</p>
<p>另一种方式就是实现 UITableViewDelegate 中的：</p>
<ul>
<li>(CGFloat)tableView:(UITableView <em>)tableView heightForRowAtIndexPath:(NSIndexPath </em>)indexPath {<br>// return xxx<br>}<br>需要注意的是，实现了这个方法后，rowHeight 的设置将无效。所以，这个方法适用于具有多种 cell 高度的 UITableView。</li>
</ul>
<p>estimatedRowHeight</p>
<p>这个属性 iOS7 就出现了， 文档是这么描述它的作用的：</p>
<p>If the table contains variable height rows, it might be expensive to calculate all their heights when the table loads. Using estimation allows you to defer some of the cost of geometry calculation from load time to scrolling time.</p>
<p>恩，听上去蛮靠谱的。我们知道，UITableView 是个 UIScrollView，就像平时使用 UIScrollView 一样，加载时指定 contentSize 后它才能根据自己的 bounds、contentInset、contentOffset 等属性共同决定是否可以滑动以及滚动条的长度。而 UITableView 在一开始并不知道自己会被填充多少内容，于是询问 data source 个数和创建 cell，同时询问 delegate 这些 cell 应该显示的高度，这就造成它在加载的时候浪费了多余的计算在屏幕外边的 cell 上。和上面的 rowHeight 很类似，设置这个估算高度有两种方法：</p>
<p>self.tableView.estimatedRowHeight = 88;<br>// or</p>
<ul>
<li>(CGFloat)tableView:(UITableView <em>)tableView estimatedHeightForRowAtIndexPath:(NSIndexPath </em>)indexPath {<br>// return xxx<br>}<br>有所不同的是，即使面对种类不同的 cell，我们依然可以使用简单的 estimatedRowHeight 属性赋值，只要整体估算值接近就可以，比如大概有一半 cell 高度是 44， 一半 cell 高度是 88， 那就可以估算一个 66，基本符合预期。</li>
</ul>
<p>说完了估算高度的基本使用，可以开始吐槽了：</p>
<p>设置估算高度后，contentSize.height 根据“cell估算值 x cell个数”计算，这就导致滚动条的大小处于不稳定的状态，contentSize 会随着滚动从估算高度慢慢替换成真实高度，肉眼可见滚动条突然变化甚至“跳跃”。<br>若是有设计不好的下拉刷新或上拉加载控件，或是 KVO 了 contentSize 或 contentOffset 属性，有可能使表格滑动时跳动。<br>估算高度设计初衷是好的，让加载速度更快，那凭啥要去侵害滑动的流畅性呢，用户可能对进入页面时多零点几秒加载时间感觉不大，但是滑动时实时计算高度带来的卡顿是明显能体验到的，个人觉得还不如一开始都算好了呢（iOS8更过分，即使都算好了也会边划边计算）<br>iOS8 self-sizing cell</p>
<p>具有动态高度内容的 cell 一直是个头疼的问题，比如聊天气泡的 cell， frame 布局时代通常是用数据内容反算高度：</p>
<p>CGFloat height = textHeightWithFont() + imageHeight + topMargin + bottomMargin + …;<br>供 UITableViewDelegate 调用时很可能是个 cell 的类方法：</p>
<p>@interface BubbleCell : UITableViewCell</p>
<ul>
<li>(CGFloat)heightWithEntity:(id)entity;<br>@end<br>各种魔法 margin 加上耦合了屏幕宽度。</li>
</ul>
<p>AutoLayout 时代好了不少，提供了-systemLayoutSizeFittingSize:的 API，在 contentView 中设置约束后，就能计算出准确的值；缺点是计算速度肯定没有手算快，而且这是个实例方法，需要维护专门为计算高度而生的 template layout cell，它还要求使用者对约束设置的比较熟练，要保证 contentView 内部上下左右所有方向都有约束支撑，设置不合理的话计算的高度就成了0。</p>
<p>这里还不得不提到一个 UILabel 的蛋疼问题，当 UILabel 行数大于0时，需要指定 preferredMaxLayoutWidth 后它才知道自己什么时候该折行。这是个“鸡生蛋蛋生鸡”的问题，因为 UILabel 需要知道 superview 的宽度才能折行，而 superview 的宽度还依仗着子 view 宽度的累加才能确定。这个问题好像到 iOS8 才能够自动解决（不过我们找到了解决方案）</p>
<p>回到正题，iOS8 WWDC 中推出了 self-sizing cell 的概念，旨在让 cell 自己负责自己的高度计算，使用 frame layout 和 auto layout 都可以享受到：</p>
<p>这个特性首先要求是 iOS8，要是最低支持的系统版本小于8的话，还得针对老版本单写套老式的算高（囧），不过用的 API 到不是新面孔：</p>
<p>self.tableView.estimatedRowHeight = 213;<br>self.tableView.rowHeight = UITableViewAutomaticDimension;<br>这里又不得不吐槽了，自动计算 rowHeight 跟 estimatedRowHeight 到底是有什么仇，如果不加上估算高度的设置，自动算高就失效了- -<br>PS：iOS8 系统中 rowHeight 的默认值已经设置成了 UITableViewAutomaticDimension，所以第二行代码可以省略。</p>
<p>问题：</p>
<p>这个自动算高在 push 到下一个页面或者转屏时会出现高度特别诡异的情况，不过现在的版本修复了。<br>求一个能让最低支持 iOS8 的公司- -<br>iOS8抽风的算高机制</p>
<p>相同的代码在 iOS7 和 iOS8 上滑动顺畅程度完全不同，iOS8 莫名奇妙的卡。很大一部分原因是 iOS8 上的算高机制大不相同，这是我做的小测试：</p>
<p>研究后发现这么多次额外计算有下面的原因：</p>
<p>不开启高度估算时，UITableView 上来就要对所有 cell 调用算高来确定 contentSize<br>dequeueReusableCellWithIdentifier:forIndexPath: 相比不带 “forIndexPath” 的版本会多调用一次高度计算<br>iOS7 计算高度后有”缓存“机制，不会重复计算；而 iOS8 不论何时都会重新计算 cell 高度<br>iOS8 把高度计算搞成这个样子，从 WWDC 也倒是能找到点解释，cell 被认为随时都可能改变高度（如从设置中调整动态字体大小），所以每次滑动出来后都要重新计算高度。</p>
<p>说了这么多，究竟有没有既能省去算高烦恼，又能保证顺畅的滑动，还能支持 iOS6+ 的一站式解决方案呢？</p>
<p>UITableView+FDTemplateLayoutCell</p>
<p>使用 UITableView+FDTemplateLayoutCell 无疑是解决算高问题的最佳实践之一，既有 iOS8 self-sizing 功能简单的 API，又可以达到 iOS7 流畅的滑动效果，还保持了最低支持 iOS6。<br>使用起来大概是这样：</p>
<p>#import <uitableview+fdtemplatelayoutcell.h></uitableview+fdtemplatelayoutcell.h></p>
<ul>
<li>(CGFloat)tableView:(UITableView <em>)tableView heightForRowAtIndexPath:(NSIndexPath </em>)indexPath {<br>return [tableView fd_heightForCellWithIdentifier:@”identifer” cacheByIndexPath:indexPath configuration:^(id cell) {<br>// 配置 cell 的数据源，和 “cellForRow” 干的事一致，比如：<br>cell.entity = self.feedEntities[indexPath.row];<br>}];<br>}<br>写完上面的代码后，你就已经使用到了：</li>
</ul>
<p>和每个 UITableViewCell ReuseID 一一对应的 template layout cell<br>这个 cell 只为了参加高度计算，不会真的显示到屏幕上；它通过 UITableView 的 -dequeueCellForReuseIdentifier: 方法 lazy 创建并保存，所以要求这个 ReuseID 必须已经被注册到了 UITableView 中，也就是说，要么是 Storyboard 中的原型 cell，要么就是使用了 UITableView 的 -registerClass:forCellReuseIdentifier: 或 -registerNib:forCellReuseIdentifier:其中之一的注册方法。<br>根据 autolayout 约束自动计算高度<br>使用了系统在 iOS6 就提供的 API：-systemLayoutSizeFittingSize:<br>根据 index path 的一套高度缓存机制<br>计算出的高度会自动进行缓存，所以滑动时每个 cell 真正的高度计算只会发生一次，后面的高度询问都会命中缓存，减少了非常可观的多余计算。<br>自动的缓存失效机制<br>无须担心你数据源的变化引起的缓存失效，当调用如-reloadData，-deleteRowsAtIndexPaths:withRowAnimation:等任何一个触发 UITableView 刷新机制的方法时，已有的高度缓存将以最小的代价执行失效。如删除一个 indexPath 为 [0:5] 的 cell 时，[0:0] ~ [0:4] 的高度缓存不受影响，而 [0:5] 后面所有的缓存值都向前移动一个位置。自动缓存失效机制对 UITableView 的 9 个公有 API 都进行了分别的处理，以保证没有一次多余的高度计算。<br>预缓存机制<br>预缓存机制将在 UITableView 没有滑动的空闲时刻执行，计算和缓存那些还没有显示到屏幕中的 cell，整个缓存过程完全没有感知，这使得完整列表的高度计算既没有发生在加载时，又没有发生在滑动时，同时保证了加载速度和滑动流畅性，下文会着重讲下这块的实现原理。<br>我们在设计这个工具的 API 时斟酌了非常长的时间，既要保证功能的强大，也要保证接口的精简，一行调用背后隐藏着很多功能。</p>
<p>这一套缓存机制能对滑动起多大影响呢？除了肉眼能明显的感知到外，我还做了个小测试：<br>一个有 54 个内容和高度不同 cell 的 table view，从头滑动到尾，再从尾滑动到头，iOS8 系统下，iPhone6，使用 Time Profiler 监测算高函数所花费的时间：</p>
<p>未使用缓存API、未使用估算，共花费 877 ms：</p>
<p>使用缓存API、开启估算，共花费 77 ms：</p>
<p>测试数据的精度先不管，从量级上就差了一个数量级，说实话自己也没想到差距有这么大- -</p>
<p>同时，工具也顺手解决了-preferredMaxLayoutWidth的问题，在计算高度前向 contentView 加了一条和 table view 宽度相同的宽度约束，强行让 contentView 内部的控件知道了自己父 view 的宽度，再反算自己被外界约束的宽度，破除“鸡生蛋蛋生鸡”的问题，这里比较 tricky，就不展开说了。下面说说利用 RunLoop 预缓存的实现。</p>
<p>利用RunLoop空闲时间执行预缓存任务</p>
<p>FDTemplateLayoutCell 的高度预缓存是一个优化功能，它要求页面处于空闲状态时才执行计算，当用户正在滑动列表时显然不应该执行计算任务影响滑动体验。<br>一般来说，这个功能要耦合 UITableView 的滑动状态才行，但这种实现十分不优雅且可能破坏外部的 delegate 结构，但好在我们还有RunLoop这个工具，了解它的运行机制后，可以用很简单的代码实现上面的功能。</p>
<p>空闲RunLoopMode</p>
<p>在曾经的 RunLoop 线下分享会（视频可戳）中介绍了 RunLoopMode 的概念。<br>当用户正在滑动 UIScrollView 时，RunLoop 将切换到 UITrackingRunLoopMode 接受滑动手势和处理滑动事件（包括减速和弹簧效果），此时，其他 Mode （除 NSRunLoopCommonModes 这个组合 Mode）下的事件将全部暂停执行，来保证滑动事件的优先处理，这也是 iOS 滑动顺畅的重要原因。<br>当 UI 没在滑动时，默认的 Mode 是 NSDefaultRunLoopMode（同 CF 中的 kCFRunLoopDefaultMode），同时也是 CF 中定义的 “空闲状态 Mode”。当用户啥也不点，此时也没有什么网络 IO 时，就是在这个 Mode 下。</p>
<p>用RunLoopObserver找准时机</p>
<p>注册 RunLoopObserver 可以观测当前 RunLoop 的运行状态，并在状态机切换时收到通知：</p>
<p>RunLoop开始<br>RunLoop即将处理Timer<br>RunLoop即将处理Source<br>RunLoop即将进入休眠状态<br>RunLoop即将从休眠状态被事件唤醒<br>RunLoop退出<br>因为“预缓存高度”的任务需要在最无感知的时刻进行，所以应该同时满足：</p>
<p>RunLoop 处于“空闲”状态 Mode<br>当这一次 RunLoop 迭代处理完成了所有事件，马上要休眠时<br>使用 CF 的带 block 版本的注册函数可以让代码更简洁：</p>
<p>CFRunLoopRef runLoop = CFRunLoopGetCurrent();<br>CFStringRef runLoopMode = kCFRunLoopDefaultMode;<br>CFRunLoopObserverRef observer = CFRunLoopObserverCreateWithHandler<br>(kCFAllocatorDefault, kCFRunLoopBeforeWaiting, true, 0, ^(CFRunLoopObserverRef observer, CFRunLoopActivity _) {<br>// TODO here<br>});<br>CFRunLoopAddObserver(runLoop, observer, runLoopMode);<br>在其中的 TODO 位置，就可以开始任务的收集和分发了，当然，不能忘记适时的移除这个 observer</p>
<p>分解成多个RunLoop Source任务</p>
<p>假设列表有 20 个 cell，加载后展示了前 5 个，那么开启估算后 table view 只计算了这 5 个的高度，此时剩下 15 个就是“预缓存”的任务，而我们并不希望这 15 个计算任务在同一个 RunLoop 迭代中同步执行，这样会卡顿 UI，所以应该把它们分别分解到 15 个 RunLoop 迭代中执行，这时就需要手动向 RunLoop 中添加 Source 任务（由应用发起和处理的是 Source 0 任务）<br>Foundation 层没对 RunLoopSource 提供直接构建的 API，但是提供了一个间接的、既熟悉又陌生的 API：</p>
<ul>
<li>(void)performSelector:(SEL)aSelector<br>onThread:(NSThread <em>)thr<br>withObject:(id)arg<br>waitUntilDone:(BOOL)wait<br>modes:(NSArray </em>)array;<br>这个方法将创建一个 Source 0 任务，分发到指定线程的 RunLoop 中，在给定的 Mode 下执行，若指定的 RunLoop 处于休眠状态，则唤醒它处理事件，简单来说就是“睡你xx，起来嗨！”<br>于是，我们用一个可变数组装载当前所有需要“预缓存”的 index path，每个 RunLoopObserver 回调时都把第一个任务拿出来分发:</li>
</ul>
<p>NSMutableArray <em>mutableIndexPathsToBePrecached = self.fd<em>allIndexPathsToBePrecached.mutableCopy;<br>CFRunLoopObserverRef observer = CFRunLoopObserverCreateWithHandler(kCFAllocatorDefault, kCFRunLoopBeforeWaiting, true, 0, ^(CFRunLoopObserverRef observer, CFRunLoopActivity </em>) {<br>if (mutableIndexPathsToBePrecached.count == 0) {<br>CFRunLoopRemoveObserver(runLoop, observer, runLoopMode);<br>CFRelease(observer); // 注意释放，否则会造成内存泄露<br>return;<br>}<br>NSIndexPath </em>indexPath = mutableIndexPathsToBePrecached.firstObject;<br>[mutableIndexPathsToBePrecached removeObject:indexPath];<br>[self performSelector:@selector(fd_precacheIndexPathIfNeeded:)<br>onThread:[NSThread mainThread]<br>withObject:indexPath<br>waitUntilDone:NO<br>modes:@[NSDefaultRunLoopMode]];<br>});<br>这样，每个任务都被分配到下个“空闲” RunLoop 迭代中执行，其间但凡有滑动事件开始，Mode 切换成 UITrackingRunLoopMode，所有的“预缓存”任务的分发和执行都会自动暂定，最大程度保证滑动流畅。</p>
<p>PS: 预缓存功能因为下拉刷新的冲突和不明显的收益已经废弃</p>
<p>开始使用UITableView+FDTemplateLayoutCell</p>
<p>如果你觉得这个工具能帮得到你，整合到工程也十分简单。<br>使用 cocoapods：</p>
<p>pod search UITableView+FDTemplateLayoutCell<br>写这篇文章时的最新版本为 1.2，去除了前一个版本的黑魔法，增加了预缓存功能。<br>欢迎使用和支持这个工具，有 bug 请随时反馈哦~<br>再复习下 github 地址： <a href="https://github.com/forkingdog/UITableView-FDTemplateLayoutCell" target="_blank" rel="external">https://github.com/forkingdog/UITableView-FDTemplateLayoutCell</a></p>
<p>转载于太阳神博客；</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">


      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/child/2015/07/24/面试题集/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="hapii">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://tva1.sinaimg.cn/crop.0.14.750.750.180/005PluWajw8fahgdnankoj30ku0lnjsd.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="不要急，不要怕">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="不要急，不要怕" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/07/24/面试题集/" itemprop="url">
                  面试题集
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2015-07-24T17:19:13+08:00">
                2015-07-24
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2015/07/24/面试题集/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/07/24/面试题集/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2015/07/24/面试题集/" class="leancloud_visitors" data-flag-title="面试题集">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>1.<a href="http://www.open-open.com/lib/view/open1440165855942.html" target="_blank" rel="external">http://www.open-open.com/lib/view/open1440165855942.html</a> 面试大全从简单到复杂(简单篇)<br>2.<a href="http://zhangmingwei.iteye.com/blog/1748431" target="_blank" rel="external">http://zhangmingwei.iteye.com/blog/1748431</a> 史上最全的iOS面试题及答案<br>3.<a href="http://www.open-open.com/lib/view/open1460681498043.html" target="_blank" rel="external">http://www.open-open.com/lib/view/open1460681498043.html</a> 面试实战1<br>4.<a href="http://www.open-open.com/lib/view/open1460681420544.html" target="_blank" rel="external">http://www.open-open.com/lib/view/open1460681420544.html</a> 面试实战2<br>5.<a href="http://www.open-open.com/lib/view/open1460682694966.html" target="_blank" rel="external">http://www.open-open.com/lib/view/open1460682694966.html</a> 面试实战3<br>6.<a href="http://ios.jobbole.com/84919/" target="_blank" rel="external">http://ios.jobbole.com/84919/</a> runtime面试题看我你就足够了<br>7.<a href="http://www.open-open.com/lib/view/open1382923236124.html" target="_blank" rel="external">http://www.open-open.com/lib/view/open1382923236124.html</a> ios面试题汇总<br>8.<a href="https://github.com/ChenYilong/iOSInterviewQuestions" target="_blank" rel="external">https://github.com/ChenYilong/iOSInterviewQuestions</a> 太阳神的面试题，一个靠谱工程师必备宝典<br>9.<a href="http://www.open-open.com/lib/view/open1457952546563.html优酷的面试题" target="_blank" rel="external">http://www.open-open.com/lib/view/open1457952546563.html优酷的面试题</a><br>10.<a href="http://www.open-open.com/lib/view/open1456359620073.html宝库的面试题" target="_blank" rel="external">http://www.open-open.com/lib/view/open1456359620073.html宝库的面试题</a><br>11.<a href="http://www.open-open.com/lib/view/open1454028502198.html" target="_blank" rel="external">http://www.open-open.com/lib/view/open1454028502198.html</a> 多线程面试必看<br>12.<a href="http://www.cocoachina.com/programmer/20151019/13746.html" target="_blank" rel="external">http://www.cocoachina.com/programmer/20151019/13746.html</a> iOS综合面试题<br>13.<a href="http://www.90159.com/2015/07/26/71/" target="_blank" rel="external">http://www.90159.com/2015/07/26/71/</a> 程序员头条面试题集锦<br>14.<a href="http://www.henishuo.com/objective-c-base-interview/" target="_blank" rel="external">http://www.henishuo.com/objective-c-base-interview/</a> iOS笔试题<br>15.<a href="http://www.henishuo.com/ios-interview-entrance/" target="_blank" rel="external">http://www.henishuo.com/ios-interview-entrance/</a> 必看，必考面试大全<br>16.<a href="http://www.henishuo.com/nanjing-jingdong-interview/" target="_blank" rel="external">http://www.henishuo.com/nanjing-jingdong-interview/</a> 京东面试题</p>
<p>（一）类与对象 <a href="http://blog.jobbole.com/79566/" target="_blank" rel="external">http://blog.jobbole.com/79566/</a><br>（二）成员变量和属性 <a href="http://blog.jobbole.com/79570/" target="_blank" rel="external">http://blog.jobbole.com/79570/</a><br>（三）消息和方法 <a href="http://blog.jobbole.com/79574/" target="_blank" rel="external">http://blog.jobbole.com/79574/</a><br>（四）Method Swizzling <a href="http://blog.jobbole.com/79580/" target="_blank" rel="external">http://blog.jobbole.com/79580/</a><br>（五）协议与分类 <a href="http://blog.jobbole.com/79583/" target="_blank" rel="external">http://blog.jobbole.com/79583/</a><br>（六）补充 <a href="http://blog.jobbole.com/79588/" target="_blank" rel="external">http://blog.jobbole.com/79588/</a></p>
<p><a href="http://www.jianshu.com/p/e071206103a4" target="_blank" rel="external">http://www.jianshu.com/p/e071206103a4</a><br>深入研究Runtime,当你读完上面的内容，在读以下内容就差不多进入了一个新的境界了</p>
<p><a href="http://www.jianshu.com/users/cb974750735c/latest_articles" target="_blank" rel="external">http://www.jianshu.com/users/cb974750735c/latest_articles</a><br>全方位runtime装逼指南</p>
<p><a href="http://ios.jobbole.com/85092/" target="_blank" rel="external">http://ios.jobbole.com/85092/</a><br>菜鸟成神必杀技之二：内存管理深度剖析，知其然，知其所以然</p>
<p>内存管理教程和原理剖析（一）<a href="http://blog.jobbole.com/66197/" target="_blank" rel="external">http://blog.jobbole.com/66197/</a><br>内存管理教程和原理剖析（二）<a href="http://blog.jobbole.com/66363/" target="_blank" rel="external">http://blog.jobbole.com/66363/</a><br>内存管理教程和原理剖析（三）<a href="http://blog.jobbole.com/66369/" target="_blank" rel="external">http://blog.jobbole.com/66369/</a><br>内存管理教程和原理剖析（四）<a href="http://blog.jobbole.com/66372/" target="_blank" rel="external">http://blog.jobbole.com/66372/</a><br>深浅拷贝 <a href="http://ios.jobbole.com/84859/" target="_blank" rel="external">http://ios.jobbole.com/84859/</a><br>菜鸟成神必杀技之三：多线程，这一块一定要深入理解，因为面试官，尤其是技术总监级别的不一定懂iOS，但是一定懂内存管理和多线程</p>
<p>IOS开发之多线程技术 <a href="http://www.open-open.com/lib/view/open1454495256105.html" target="_blank" rel="external">http://www.open-open.com/lib/view/open1454495256105.html</a><br>多线程总结 ： <a href="http://www.open-open.com/lib/view/open1439907700676.html" target="_blank" rel="external">http://www.open-open.com/lib/view/open1439907700676.html</a><br>多线程详解 ： <a href="http://www.open-open.com/lib/view/open1454028502198.html" target="_blank" rel="external">http://www.open-open.com/lib/view/open1454028502198.html</a><br>必看 <a href="http://ios.jobbole.com/85040/" target="_blank" rel="external">http://ios.jobbole.com/85040/</a><br>10分钟 搞定JS和iOS的交互</p>
<p>你必须先看这篇文章： <a href="http://www.open-open.com/lib/view/open1419305655562.html" target="_blank" rel="external">http://www.open-open.com/lib/view/open1419305655562.html</a><br><a href="http://blog.csdn.net/lizhongfu2013/article/details/9232129" target="_blank" rel="external">http://blog.csdn.net/lizhongfu2013/article/details/9232129</a><br><a href="http://blog.csdn.net/lizhongfu2013/article/details/9236357" target="_blank" rel="external">http://blog.csdn.net/lizhongfu2013/article/details/9236357</a><br>干货好文章 <a href="http://www.jianshu.com/p/a329cd4a67ee" target="_blank" rel="external">http://www.jianshu.com/p/a329cd4a67ee</a><br>干货好文章 <a href="http://ios.jobbole.com/84491/" target="_blank" rel="external">http://ios.jobbole.com/84491/</a><br>交互范例 ：<a href="http://www.open-open.com/lib/view/open1463553967635.html" target="_blank" rel="external">http://www.open-open.com/lib/view/open1463553967635.html</a><br><a href="http://www.open-open.com/lib/view/open1456311816823.html" target="_blank" rel="external">http://www.open-open.com/lib/view/open1456311816823.html</a><br>ios 视频录制的三种方式</p>
<p><a href="http://ios.jobbole.com/85069/" target="_blank" rel="external">http://ios.jobbole.com/85069/</a><br>直播相关内容</p>
<p><a href="https://mp.weixin.qq.com/s?__biz=MzA4MjI0NjczNQ==&amp;mid=2652365086&amp;idx=1&amp;sn=e5ab2d6a641102ec9e2b5c175678a797&amp;scene=1&amp;srcid=05223KqAHcjMGjh83QqLXOVc&amp;key=f5c31ae61525f82e0b29fa654e701eb5165093fa979d25fc601a34874dce01f520a124dfdd113d992d0e3e86eeba9e74&amp;ascene=0&amp;uin=MTk5NDM1NQ%3D%3D&amp;devicetype=iMac+MacBookPro11%2C5+OSX+OSX+10.11.4+build(15E65)&amp;version=11020201&amp;pass_ticket=2vSvVDILehoRZdj1MGS0qpcfIh%2FXnQ0HhKl3H3arUtQ%3D" target="_blank" rel="external">https://mp.weixin.qq.com/s?__biz=MzA4MjI0NjczNQ==&amp;mid=2652365086&amp;idx=1&amp;sn=e5ab2d6a641102ec9e2b5c175678a797&amp;scene=1&amp;srcid=05223KqAHcjMGjh83QqLXOVc&amp;key=f5c31ae61525f82e0b29fa654e701eb5165093fa979d25fc601a34874dce01f520a124dfdd113d992d0e3e86eeba9e74&amp;ascene=0&amp;uin=MTk5NDM1NQ%3D%3D&amp;devicetype=iMac+MacBookPro11%2C5+OSX+OSX+10.11.4+build(15E65)&amp;version=11020201&amp;pass_ticket=2vSvVDILehoRZdj1MGS0qpcfIh%2FXnQ0HhKl3H3arUtQ%3D</a><br><a href="https://mp.weixin.qq.com/s?__biz=MzA4MjI0NjczNQ==&amp;mid=2652365088&amp;idx=2&amp;sn=86e62f2ab415df27c5bba3ba171cdd54&amp;scene=1&amp;srcid=0522CBTRcjmmWfV4s8o68w4w&amp;key=f5c31ae61525f82e3f37b74d7b115678e9ed2553afb3551ea0f3dc8f920e72a918db4844d4530d8c00608ca91a21700a&amp;ascene=0&amp;uin=MTk5NDM1NQ%3D%3D&amp;devicetype=iMac+MacBookPro11%2C5+OSX+OSX+10.11.4+build(15E65)&amp;version=11020201&amp;pass_ticket=2vSvVDILehoRZdj1MGS0qpcfIh%2FXnQ0HhKl3H3arUtQ%3D" target="_blank" rel="external">https://mp.weixin.qq.com/s?__biz=MzA4MjI0NjczNQ==&amp;mid=2652365088&amp;idx=2&amp;sn=86e62f2ab415df27c5bba3ba171cdd54&amp;scene=1&amp;srcid=0522CBTRcjmmWfV4s8o68w4w&amp;key=f5c31ae61525f82e3f37b74d7b115678e9ed2553afb3551ea0f3dc8f920e72a918db4844d4530d8c00608ca91a21700a&amp;ascene=0&amp;uin=MTk5NDM1NQ%3D%3D&amp;devicetype=iMac+MacBookPro11%2C5+OSX+OSX+10.11.4+build(15E65)&amp;version=11020201&amp;pass_ticket=2vSvVDILehoRZdj1MGS0qpcfIh%2FXnQ0HhKl3H3arUtQ%3D</a></p>
<p>那些著名或非著名的iOS面试题</p>
<p>（上）<a href="http://www.open-open.com/lib/view/open1460681498043.html" target="_blank" rel="external">http://www.open-open.com/lib/view/open1460681498043.html</a><br>（中）<a href="http://www.open-open.com/lib/view/open1460681420544.html" target="_blank" rel="external">http://www.open-open.com/lib/view/open1460681420544.html</a><br>（下）<a href="http://www.open-open.com/lib/view/open1460682694966.html" target="_blank" rel="external">http://www.open-open.com/lib/view/open1460682694966.html</a><br><a href="http://ios.jobbole.com/84919/" target="_blank" rel="external">http://ios.jobbole.com/84919/</a><br>一个靠谱工程师必须会的面试题：<br>必看精品<br><a href="https://github.com/ChenYilong/iOSInterviewQuestions/blob/master/01%E3%80%8A%E6%8B%9B%E8%81%98%E4%B8%80%E4%B8%AA%E9%9D%A0%E8%B0%B1%E7%9A%84iOS%E3%80%8B%E9%9D%A2%E8%AF%95%E9%A2%98%E5%8F%82%E8%80%83%E7%AD%94%E6%A1%88/%E3%80%8A%E6%8B%9B%E8%81%98%E4%B8%80%E4%B8%AA%E9%9D%A0%E8%B0%B1%E7%9A%84iOS%E3%80%8B%E9%9D%A2%E8%AF%95%E9%A2%98%E5%8F%82%E8%80%83%E7%AD%94%E6%A1%88%EF%BC%88%E4%B8%8A%EF%BC%89.md" target="_blank" rel="external">https://github.com/ChenYilong/iOSInterviewQuestions/blob/master/01%E3%80%8A%E6%8B%9B%E8%81%98%E4%B8%80%E4%B8%AA%E9%9D%A0%E8%B0%B1%E7%9A%84iOS%E3%80%8B%E9%9D%A2%E8%AF%95%E9%A2%98%E5%8F%82%E8%80%83%E7%AD%94%E6%A1%88/%E3%80%8A%E6%8B%9B%E8%81%98%E4%B8%80%E4%B8%AA%E9%9D%A0%E8%B0%B1%E7%9A%84iOS%E3%80%8B%E9%9D%A2%E8%AF%95%E9%A2%98%E5%8F%82%E8%80%83%E7%AD%94%E6%A1%88%EF%BC%88%E4%B8%8A%EF%BC%89.md</a><br>必看精品<br><a href="https://github.com/ChenYilong/iOSInterviewQuestions/blob/master/01%E3%80%8A%E6%8B%9B%E8%81%98%E4%B8%80%E4%B8%AA%E9%9D%A0%E8%B0%B1%E7%9A%84iOS%E3%80%8B%E9%9D%A2%E8%AF%95%E9%A2%98%E5%8F%82%E8%80%83%E7%AD%94%E6%A1%88/%E3%80%8A%E6%8B%9B%E8%81%98%E4%B8%80%E4%B8%AA%E9%9D%A0%E8%B0%B1%E7%9A%84iOS%E3%80%8B%E9%9D%A2%E8%AF%95%E9%A2%98%E5%8F%82%E8%80%83%E7%AD%94%E6%A1%88%EF%BC%88%E4%B8%8B%EF%BC%89.md" target="_blank" rel="external">https://github.com/ChenYilong/iOSInterviewQuestions/blob/master/01%E3%80%8A%E6%8B%9B%E8%81%98%E4%B8%80%E4%B8%AA%E9%9D%A0%E8%B0%B1%E7%9A%84iOS%E3%80%8B%E9%9D%A2%E8%AF%95%E9%A2%98%E5%8F%82%E8%80%83%E7%AD%94%E6%A1%88/%E3%80%8A%E6%8B%9B%E8%81%98%E4%B8%80%E4%B8%AA%E9%9D%A0%E8%B0%B1%E7%9A%84iOS%E3%80%8B%E9%9D%A2%E8%AF%95%E9%A2%98%E5%8F%82%E8%80%83%E7%AD%94%E6%A1%88%EF%BC%88%E4%B8%8B%EF%BC%89.md</a><br>必看精品<br><a href="http://www.open-open.com/lib/view/open1382923236124.html" target="_blank" rel="external">http://www.open-open.com/lib/view/open1382923236124.html</a><br>必看精品（从简单到复杂的面试题）<br><a href="http://www.open-open.com/lib/view/open1440165855942.html" target="_blank" rel="external">http://www.open-open.com/lib/view/open1440165855942.html</a><br>优酷的面试题 ：<a href="http://www.open-open.com/lib/view/open1457952546563.html" target="_blank" rel="external">http://www.open-open.com/lib/view/open1457952546563.html</a><br>宝库的面试题 ： <a href="http://www.open-open.com/lib/view/open1456359620073.html" target="_blank" rel="external">http://www.open-open.com/lib/view/open1456359620073.html</a></p>
<p>跨平台APP—-对Cordova,APPCan,DCloud,APICloud四大平台的分析<br>发表于 2016-05-20   |   暂无评论<br>原文转自：<a href="http://blog.csdn.net/tangzenglei/article/details/50668914" target="_blank" rel="external">http://blog.csdn.net/tangzenglei/article/details/50668914</a></p>
<p>前言：<br>移动开发是未来一个很重要的IT领域，而跨平台开发将是这一领域最重要的事情。 —-谷震平</p>
<p>兵器谱</p>
<p>在国外，最大的是Cordova（PhoneGap，2011年广泛流行），在2012年12月开源。<br>在国内，按时间顺序，有：</p>
<p>二 Cordova</p>
<p>Cordova是Apache软件基金会的一个产品。其前身是PhoneGap，由Nitobi开发，2011年10月，Adobe收够了Nitobi，并且PhoneGap项目也被贡献给Apache软件基金会。Apache在2012年12月，发布了Cordova，截止到2015年12月，最新版面是3.0。<br>该框架的目标用户群体是原生开发者，其设计初衷是希望用户群体能够通过跨平台开发的方法降低原生开发的成本。为此，开发人员需要安装原生开发环境，配置工程，使用HTML5、CSS3、JS和原生SDK生成应用。<br>Cordova的优势很明显，可以使用的框架、原生接口、支持平台都很多。但是，外国人写的东西，公司使用后，出现的技术问题难以解决。同时，其在使用jQuery Mobile、Sencha Touch等前端框架的时候，有特效启动慢、页面切换慢、数据请求慢的特点。</p>
<p>三 APPCan</p>
<p>AppCan成立于2010年，2011年推出产品并测试，2012年正式推出品牌，2013年商业模式成型，2014年开发者注册约70w。AppCan不是开源平台，同时，企业版和部分插件是收费的。换句话说，AppCan只是一个卖软件的商业公司。我们认为：这会对其市场的占有率有着直接影响，闭源而没有垄断，所以前景不会太好。</p>
<p>四 DCloud</p>
<p>DCloud大部分产品开源，W3C会员单位，HTML5中国产业联盟的发起公司之一，在HTML5这个行业有一定的江湖地位。旗下四款产品：HBuilder、5+ Runtime、MUI、流应用都是弥补并扩展HTML5特性的产品。该公司的理念就是解决HTML5的性能、工具、能力三方面的问题。MUI是一款不错的前端框架，性能比 jQuery Mobile、Bootstrap好很多，主要区别：<br>设计思路不同，MUI坚持用原生JS做，不依赖jQuery或者Angularjs。<br>MUI调用了5+ Runtime的底层原生加速，比不带原生加速的框架更快。<br>但是，DCloud毕竟是个新平台，发展才2年，新产品内部存在的Bug还需要很多的测试。在其官方社区中，不少开发者也在呼吁DCloud尽快完善文档和框架。</p>
<p>五 APICloud</p>
<p>APICloud提供原生应用的功能模块（设备访问，界面布局，开放SDK等），开发者可以通过JS调用。前端工程师负责页面布局，UI展现，及简单的交互，原生模块负责性能方面和功能实现，两者结合形成一个完整的应用。同时APICloud提供了云数据库的功能，前端不必了解PHP，Node.js等后端语言，通过JS接口或Restful API实现数据库的增删改查。<br>但是APICloud的更新速度很快，版本不太稳定。而且，它是为不懂APP开发的人士准备的，不适合科技公司和程序员。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">


      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/child/2015/07/13/单例的几种写法/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="hapii">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://tva1.sinaimg.cn/crop.0.14.750.750.180/005PluWajw8fahgdnankoj30ku0lnjsd.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="不要急，不要怕">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="不要急，不要怕" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/07/13/单例的几种写法/" itemprop="url">
                  单例的几种写法
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2015-07-13T15:02:48+08:00">
                2015-07-13
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/基础/" itemprop="url" rel="index">
                    <span itemprop="name">基础</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2015/07/13/单例的几种写法/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/07/13/单例的几种写法/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2015/07/13/单例的几种写法/" class="leancloud_visitors" data-flag-title="单例的几种写法">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>1.最普通的写法</p>
<p>+(MusicManger <em>)shareMusicManger{<br>static MusicManger </em>manager =nil;</p>
<p>if (manager==nil) {<br>manager = [[MusicManger alloc] init];<br>}<br>return  manager;<br>}<br>2.GCD保证在多线程的时候有且只有一个一次实例化；<br>+(MusicManger <em>)shareMusicManger{<br>static MusicManger </em>manager =nil;</p>
<p>static dispatch_once_t onceToken;<br>dispatch_once(&amp;onceToken,^{</p>
<p>if (manager==nil) {<br>manager = [[MusicManger alloc] init];<br>}</p>
<p>});<br>return manager;<br>}<br>3.加锁的写法</p>
<p>+(MusicManger <em>)shareMusicManger{<br>static MusicManger </em>manager =nil;<br>@synchronized(self) {<br>if (manager==nil) {<br>manager = [[MusicManger alloc] init];<br>}<br>return manager;<br>}</p>
<p>}</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">


      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/child/2015/03/13/ActionSheet和dataPicker的使用/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="hapii">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://tva1.sinaimg.cn/crop.0.14.750.750.180/005PluWajw8fahgdnankoj30ku0lnjsd.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="不要急，不要怕">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="不要急，不要怕" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/03/13/ActionSheet和dataPicker的使用/" itemprop="url">
                  ActionSheet和dataPicker的使用
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2015-03-13T16:00:44+08:00">
                2015-03-13
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2015/03/13/ActionSheet和dataPicker的使用/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/03/13/ActionSheet和dataPicker的使用/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2015/03/13/ActionSheet和dataPicker的使用/" class="leancloud_visitors" data-flag-title="ActionSheet和dataPicker的使用">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>1.ActionSheet的使用</p>
<p><uiactionsheetdelegate>{<br>UIButton *but;<br>}</uiactionsheetdelegate></p>
<p>@end</p>
<p>@implementation ViewController</p>
<ul>
<li>(void)viewDidLoad {<br>[super viewDidLoad];</li>
</ul>
<p>but = [[UIButton alloc]initWithFrame:CGRectMake(10, 100, 100, 50)];<br>but.backgroundColor = [UIColor purpleColor];<br>[self.view addSubview:but];<br>self.view.backgroundColor = [UIColor grayColor];<br>[but addTarget:self action:@selector(butClick) forControlEvents:UIControlEventTouchUpInside];<br>}</p>
<ul>
<li>(void)butClick{<br>UIActionSheet *sheet= [[UIActionSheet alloc]initWithTitle:@”选择性别” delegate:self cancelButtonTitle:@”取消” destructiveButtonTitle:nil otherButtonTitles:@”男”,@”女”, nil];<br>sheet.tag = 200;<br>[sheet showInView:self.view];</li>
</ul>
<p>UIActionSheet *sheet2 = [[UIActionSheet alloc]initWithTitle:@”选择年龄” delegate:self cancelButtonTitle:@”取消” destructiveButtonTitle:nil otherButtonTitles:@”23”,@”18”, nil];<br>sheet2.tag = 201;<br>[sheet2 showInView:self.view];</p>
<p>}</p>
<p>#pragma mark UIActionSheetDelegate实现；</p>
<ul>
<li>(void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex{<br>//性别男女；<br>if (actionSheet.tag == 200) {<br>if (buttonIndex) {<br>[but setTitle:@”女” forState:UIControlStateNormal];<br>}else{<br>[but setTitle:@”男” forState:UIControlStateNormal];<br>}<br>}</li>
</ul>
<p>//性别男女；<br>if (actionSheet.tag == 201) {<br>if (buttonIndex) {<br>[but setTitle:@”22” forState:UIControlStateNormal];<br>}else{<br>[but setTitle:@”18” forState:UIControlStateNormal];<br>}<br>}</p>
<p>}</p>
<p>2.daterpicker的使用</p>
<p>#define With [UIScreen mainScreen].bounds.size.width</p>
<p>#define Height [UIScreen mainScreen].bounds.size.height<br>@interface ViewController (){</p>
<p>UIButton <em>but1;<br>UIDatePicker </em>dataPicker;<br>}</p>
<ul>
<li>(void)viewDidLoad {<br>[super viewDidLoad];<br>self.view.backgroundColor = [UIColor grayColor];<br>but1 = [[UIButton alloc]initWithFrame:CGRectMake(10, 100, 100, 50)];<br>[self.view addSubview:but1];<br>but1.backgroundColor = [UIColor redColor];<br>[but1 addTarget:self action:@selector(but1Click) forControlEvents:UIControlEventTouchUpInside];</li>
</ul>
<p>}</p>
<ul>
<li>(void)but1Click{<br>if (dataPicker) {<br>if (dataPicker.frame.origin.y&lt;Height) {<br>[UIView animateWithDuration:0.3 animations:^{<br>dataPicker.frame = CGRectMake(0, Height, With, 1000);<br>}];<br>}else{<br>dataPicker.frame = CGRectMake(0, Height-216, With, 216);<br>}<br>}else{<br>dataPicker = [[UIDatePicker alloc]initWithFrame:CGRectMake(0, Height, With, 1000)];<br>dataPicker.backgroundColor = [UIColor purpleColor];<br>//设置最大和最小值;<br>dataPicker.maximumDate = [NSDate date];<br>//日期转换格式.可以把时间转换为文字;<br>NSDateFormatter <em>formatter = [[NSDateFormatter alloc]init];<br>//设置格式;<br>[formatter setDateFormat:@”yyyy-MM-dd”];<br>NSDate </em>minDate = [formatter dateFromString:@”1970-01-01”];<br>//根据date转换为string<br>//[formatter stringFromDate:minDate];<br>dataPicker.minimumDate = minDate;<br>//设置样式<br>dataPicker.datePickerMode = UIDatePickerModeDate;<br>//添加事件;<br>[dataPicker addTarget:self action:@selector(datePickerClick) forControlEvents:UIControlEventValueChanged];<br>[self.view addSubview:dataPicker];</li>
</ul>
<p>//处于外界，要出来;<br>[UIView animateWithDuration:0.3 animations:^{<br>dataPicker.frame = CGRectMake(0, Height-216, With, 216);<br>}];<br>}</p>
<p>}</p>
<ul>
<li>(void)datePickerClick{<br>NSDateFormatter *formatter = [[NSDateFormatter alloc]init];<br>[formatter setDateFormat:@”yyyy-MM-dd”];<br>[but1 setTitle:[formatter stringFromDate:dataPicker.date] forState:UIControlStateNormal];</li>
</ul>
<p>}</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">


      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/child/2014/10/16/多线程/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="hapii">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://tva1.sinaimg.cn/crop.0.14.750.750.180/005PluWajw8fahgdnankoj30ku0lnjsd.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="不要急，不要怕">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="不要急，不要怕" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/10/16/多线程/" itemprop="url">
                  多线程
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2014-10-16T21:20:10+08:00">
                2014-10-16
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/基础/" itemprop="url" rel="index">
                    <span itemprop="name">基础</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2014/10/16/多线程/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2014/10/16/多线程/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2014/10/16/多线程/" class="leancloud_visitors" data-flag-title="多线程">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>以前windows 电脑可以开一个QQ LOL 等<br>开多个应用 （苹果手机其实不允许同时开多个应用）<br>为什么QQ音乐可以后台运行（支持后台运行）<br>也就是说，只要我们的应用进入到后台 （最大限制：如果你的应用在一定时间内 ，没有回到前台的话，应用会被“杀死”）<br>苹果手机只支持一个应用在前台运行，</p>
<p>多线程<br>QQ －&gt;（开启多线程）<br>场景：假如使用QQ 1.我要下载文件 并且还需要和好友聊天<br>[self loadData];<br>[self liaotian];//主线程 并且只有主线程才能进行Ui刷新</p>
<p>多线程在我们iOS里面 有3种方式<br>NSThread   GCD(效率高)  NSOperationQueue(队列)</p>
<p>我们开辟一个子线程去执行一个任务的时候，任务已经执行完毕，之后（arc）会自动释放；</p>
<p>1.NStread方法</p>
<ul>
<li>(void)viewDidLoad {<br>[super viewDidLoad];</li>
</ul>
<p>}<br>//点击下载按钮</p>
<ul>
<li>(IBAction)downLoads:(id)sender {</li>
</ul>
<p>//通过加方法，自动去执行任务，loadData<br>//[NSThread detachNewThreadSelector:@selector(loadData) toTarget:self withObject:nil];</p>
<p>//通过减方法创建的线程，他不会主动去执行任务;必须start<br>NSThread *thread = [[NSThread alloc]initWithTarget:self selector:@selector(loadData) object:nil];<br>//自己开启；<br>[thread start];</p>
<p>//多线程的应用场景；<br>/<em><br>1.下载（请求数据）<br>2.sdwebImage<br>3.当你需要一些耗时的操作，你应该不能在主线程里面执行（因为在主线程里面的话，他是吧这件事做完之后才能做下一件事），开辟一条子线程去执行。
</em>/</p>
<p>//[self loadData];</p>
<p>/*<br>同步：逐步执行，当一个任务执行完毕，才能执行下一个(卡UI主线程)</p>
<p>异步：多个任务，同时进行(任务是在子线程里面执行，不会卡住主线程),</p>
<p>UI必须在主线程里操作；比如不能在下方的loadData中创造一个button<br>（创建UI 刷新UI 控制进度条）<br>*/</p>
<p>}<br>-(void)loadData{<br>for (int i = 0; i&lt;120; i++) {<br>NSLog(@”下载中%i”,i);<br>sleep(1);<br>if (i==10) {</p>
<p>NSThread *thread = [NSThread currentThread];<br>//中断当前线程；<br>[thread cancel];<br>NSLog(@”下载中断”);<br>break;<br>}</p>
<p>}<br>[NSThread currentThread];<br>}<br>//点击聊天按钮</p>
<ul>
<li>(IBAction)chatClick:(id)sender {<br>NSLog(@”聊天”);<br>sleep(1);<br>}</li>
</ul>
<p>2.GCD 的使用</p>
<p>dispatch_queue_t queue 线程;<br>优先级<br>正常 高 低<br>//DISPATCH_QUEUE_PRIORITY_DEFAULT 优先级正常<br>注意：刷新UI 只能在主线程里面执行；</p>
<p>dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{<br>//你想干什么事情，下载 进行一些操作;</p>
<p>UIImage *image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:@”<a href="http://pic68.nipic.com/file/20150528/21136031_150251892383_2.jpg" target="_blank" rel="external">http://pic68.nipic.com/file/20150528/21136031_150251892383_2.jpg</a>“]]];</p>
<pre><code> dispatch_async 函数会将传入的block块放入指定的queue里运行。这个函数是异步的，这就意味着它会立即返回而不管block是否运行结束。因此，我们可以在block里运行各种耗时的操作（如网络请求） 而同时不会阻塞UI线程。
dispatch_get_global_queue 会获取一个全局队列，我们姑且理解为系统为我们开启的一些全局线程。我们用priority指定队列的优先级，而flag作为保留字段备用（一般为0）。
dispatch_get_main_queue 会返回主队列，也就是UI队列。它一般用于在其它队列中异步完成了一些工作后，需要在UI队列中更新界面（比如上面代码中的[self updateUIWithResult:result]）的情况。

 好的，知道这些特性之后，我们可以这样理解上面的代码：利用parameter变量异步地发起一个网络请求，并在请求之后更新UI线程。
</code></pre><p>特别强调：在子线程里操作UI无效甚至导致崩溃；<br>if (image) {<br>dispatch_async(dispatch_get_main_queue(), ^{<br>//这里你想干什么<br>iv.image = image;<br>});<br>}</p>
<p>});</p>
<p>//回到主线程；；<br>//    self performSelectorOnMainThread:&lt;#(nonnull SEL)#&gt; withObject:&lt;#(nullable id)#&gt; waitUntilDone:&lt;#(BOOL)#&gt;<br>//延时处理<br>[self performSelector:@selector(abc:) withObject:@(100) afterDelay:2];</p>
<ul>
<li>(void)viewDidLoad {<br>[super viewDidLoad];<br>UIImageView *iv = [[UIImageView alloc]initWithFrame:CGRectMake(0, 200, 400, 400)];<br>[self.view addSubview:iv];</li>
</ul>
<p>dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{<br>//你想干什么事情，下载 进行一些操作;</p>
<p>UIImage *image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:@”<a href="http://pic68.nipic.com/file/20150528/21136031_150251892383_2.jpg" target="_blank" rel="external">http://pic68.nipic.com/file/20150528/21136031_150251892383_2.jpg</a>“]]];</p>
<p>if (image) {<br>dispatch_async(dispatch_get_main_queue(), ^{<br>//这里你想干什么<br>iv.image = image;<br>});<br>}</p>
<p>});<br>[self performSelector:@selector(abc:) withObject:@(100) afterDelay:2];</p>
<p>}</p>
<ul>
<li>(void)abc:(NSNumber *)n{<br>NSLog(@”%@”,n);<br>}</li>
<li>(IBAction)but1Click:(id)sender {<br>//苹果的api<br>[NSThread detachNewThreadSelector:@selector(addi) toTarget:self withObject:nil];</li>
</ul>
<p>}</p>
<ul>
<li>(void)addi{<br>for (int k=0; k&lt;100; k++) {<br>i++;<br>NSLog(@”1 %i”,i);<br>sleep(0.05);<br>}</li>
</ul>
<p>}</p>
<ul>
<li>(void)adde{<br>i++;<br>NSLog(@”2 %i”,i);<br>}</li>
</ul>
<ul>
<li>(IBAction)but2Click:(id)sender {<br>[NSThread detachNewThreadSelector:@selector(adde) toTarget:self withObject:nil];<br>}</li>
</ul>
<p>3&gt;NSOperationQueue 队列<br>定义一个队列<br>NSOperationQueue *_queue;<br>//容器<br>_queue = [[NSOperationQueue alloc]init];<br>//设置最大的任务数;<br>_queue.maxConcurrentOperationCount = 100;</p>
<p>//block 类型的任务<br>NSBlockOperation *bOperation = [NSBlockOperation blockOperationWithBlock:^{<br>NSLog(@”block类型的任务”);<br>}];</p>
<p>//带方法的任务<br>NSInvocationOperation *operation = [[NSInvocationOperation alloc]initWithTarget:self selector:@selector(abc) object:nil];</p>
<p>//添加到容器中;<br>[_queue addOperation:bOperation];<br>[_queue addOperation:operation];<br>但是一旦添加到operation queue,queue就拥有了这个Operation对象并且不能被删除,唯一能做的事情是取消。你可以调用Operation对象的cancel方法取消单个操作,也可以调用operation queue的cancelAllOperations方法取消当前queue中的所有操作。<br>[bOperation cancel];</p>
<p>队列任务执行的方法</p>
<ul>
<li>(void)abc{<br>NSLog(@”haha”);<br>}</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">


      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/child/2014/08/22/关于CocoaPods/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="hapii">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://tva1.sinaimg.cn/crop.0.14.750.750.180/005PluWajw8fahgdnankoj30ku0lnjsd.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="不要急，不要怕">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="不要急，不要怕" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/08/22/关于CocoaPods/" itemprop="url">
                  关于CocoaPods
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2014-08-22T19:25:38+08:00">
                2014-08-22
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2014/08/22/关于CocoaPods/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2014/08/22/关于CocoaPods/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2014/08/22/关于CocoaPods/" class="leancloud_visitors" data-flag-title="关于CocoaPods">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>1.移除现有Ruby默认源    因为我们身处于大天朝<br>gem sources –remove <a href="https://rubygems.org/" target="_blank" rel="external">https://rubygems.org/</a></p>
<p>2.使用新的源</p>
<p>gem sources -a <a href="https://ruby.taobao.org/" target="_blank" rel="external">https://ruby.taobao.org/</a></p>
<p>3.验证新源是否替换成功<br>gem sources –l</p>
<p>如果出现这样就好了<br><strong> CURRENT SOURCES *</strong></p>
<p><a href="http://ruby.taobao.org/" target="_blank" rel="external">http://ruby.taobao.org/</a></p>
<p>4.安装CocoaPods<br>(1)<br>sudo gem install cocoapods（苹果旧系统）<br>sudo gem install -n /usr/local/bin cocoapods（上面一行不行就下面一行）</p>
<p>如果出现<br>21gems install<br>说明成功了！</p>
<p>(2)<br>pod setup<br>走到这一步的话千万不要急，不要急，不要急，一定要等他配置完成</p>
<p>5.更新gem<br>sudo gem update –system</p>
<p>6.新建工程，并在终端用cd指令到文件夹内<br>$pod search 第三方</p>
<p>我尝试了一下搜索AF</p>
<p>7.新建文件 vim “Podfile”，<br>$vim Podfile<br>platform:ios, ‘7.0’   </p>
<p>8.导入第三方库<br>$pod install</p>
<p>pod updata 是更新第三方库，在项目中要慎重</p>
<p>成功了</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">


      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="http://tva1.sinaimg.cn/crop.0.14.750.750.180/005PluWajw8fahgdnankoj30ku0lnjsd.jpg"
               alt="hapii" />
          <p class="site-author-name" itemprop="name">hapii</p>
          <p class="site-description motion-element" itemprop="description">Stay Hungry. Stay Foolish.</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">33</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">2</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">8</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/hapiii" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/5339381110/profile?topnav=1&wvr=6&is_all=1" target="_blank" title="微博">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  微博
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://www.jianshu.com/users/d746cffd2a58/timeline" target="_blank" title="简书">
                  
                    <i class="fa fa-fw fa-twitter"></i>
                  
                  简书
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.zhihu.com/people/oncezhu/activities" target="_blank" title="知乎">
                  
                    <i class="fa fa-fw fa-twitter"></i>
                  
                  知乎
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">hapii</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"hapii"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    
    <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  








  
  

  

  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("zc81aNb6TWWwuKFCHYYHVEwj-gzGzoHsz", "fzUiJKfzp0BdJLPgoyW4Tf5w");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  


</body>
</html>
