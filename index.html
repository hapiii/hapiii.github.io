<!doctype html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="Stay Hungry. Stay Foolish.">
<meta property="og:type" content="website">
<meta property="og:title" content="不要急，不要怕">
<meta property="og:url" content="http://yoursite.com/child/index.html">
<meta property="og:site_name" content="不要急，不要怕">
<meta property="og:description" content="Stay Hungry. Stay Foolish.">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="不要急，不要怕">
<meta name="twitter:description" content="Stay Hungry. Stay Foolish.">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/child/"/>





  <title> 不要急，不要怕 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">不要急，不要怕</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">Life needs curiosity and passion.</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/child/2017/05/01/python云图——聊天记录/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="hapii">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://tva1.sinaimg.cn/crop.0.14.750.750.180/005PluWajw8fahgdnankoj30ku0lnjsd.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="不要急，不要怕">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="不要急，不要怕" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/01/python云图——聊天记录/" itemprop="url">
                  python云图——聊天记录
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-05-01T13:14:29+08:00">
                2017-05-01
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2017/05/01/python云图——聊天记录/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/05/01/python云图——聊天记录/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2017/05/01/python云图——聊天记录/" class="leancloud_visitors" data-flag-title="python云图——聊天记录">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="需要工具"><a href="#需要工具" class="headerlink" title="需要工具:"></a>需要工具:</h1><ol>
<li>python编辑器，我用的是<a href="https://www.jetbrains.com/pycharm/download/#section=mac" target="_blank" rel="external">pyCharm</a></li>
<li>iOS设备管理工具<a href="https://imazing.com/" target="_blank" rel="external">iMazing</a></li>
</ol>
<p>先上成果</p>
<p><img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSd1pv13T8yt5GIwDYsDiimuAU36p1BxO-1po9PuUPi0My3JsJyHQ" alt="害羞，把图换成大中国了"></p>
<p>下面是详细的步骤了，</p>
<h2 id="1-获取聊天记录的数据库"><a href="#1-获取聊天记录的数据库" class="headerlink" title="1.获取聊天记录的数据库"></a>1.获取聊天记录的数据库</h2><p>打开我们的iMazing，<br>点击应用程序，选择微信<br><img src="http://oiht6on69.bkt.clouddn.com/%E8%BF%9F%E5%88%B0%E7%9A%84%E6%83%85%E4%BA%BA%E8%8A%82%E7%A4%BC%E7%89%A9_%E5%81%9A%E4%B8%80%E4%B8%AA%E4%B8%8E%E5%A5%B9%E5%BE%AE%E4%BF%A1%E8%81%8A%E5%A4%A9%E7%9A%84%E8%AF%8D%E4%BA%91%E5%90%A7/%E7%AC%AC%E4%B8%80%E6%AD%A5%E7%9A%84%E7%95%8C%E9%9D%A2.png" alt=""></p>
<p>点击备份<br><img src="http://i1.piimg.com/567571/70b3bddaf8f06931.png" alt="点击微信后的样子"></p>
<p>点击/Documents/9～～～05/DB/MM.sqlite，中间这个文件夹名字都不一样，不过也没几个乱码文件夹，除去000000000的一个一个试，找到DB文件夹，这个电饭锅就是我们要找的数据库</p>
<p><img src="http://i2.muimg.com/567571/6d7fed69efe001b4.png" alt="保存聊天记录的数据库"></p>
<p>以上部分学习于<a href="http://www.jianshu.com/p/6b4514fe1549" target="_blank" rel="external">这个地址</a>，大家可以去看看。</p>
<h2 id="2-数据库处理，获取目标人物的聊天记录"><a href="#2-数据库处理，获取目标人物的聊天记录" class="headerlink" title="2.数据库处理，获取目标人物的聊天记录"></a>2.数据库处理，获取目标人物的聊天记录</h2><p>首先先将刚刚找到的数据库复制到目录中，<br><img src="http://i2.muimg.com/567571/513003a4063a3b42.png" alt="目录结构"><br>然后找一个图片模版，这里把我的放上来，记得把名字改为yy.jpeg哦，还有，生成词云的文字颜色和图片以前的颜色是一样的，所以要找一个色彩丰富的图片<br><img src="http://i2.muimg.com/567571/8fb9651d57ef8898.jpg" alt="心图片"></p>
<p>好了，接下来就是获取目标人物的聊天记录的，话不多说，直接上代码：</p>
<pre><code>import sqlite3
import pandas as pd

conn=sqlite3.connect(&apos;%s&apos; %&apos;./MM.sqlite&apos;) #连接数据库
cur=conn.cursor()
query = &quot;SELECT name FROM sqlite_master WHERE     type=&apos;table&apos; order by name&quot; #查询所有表名
a = pd.read_sql(query, conn)
result = []
    for i in a.name: #开始遍历所有表查找女票(的聊天记录)藏身之处
query3 = &quot;SELECT * FROM %s&quot; %(i)
r = pd.read_sql(query3, conn)

if &apos;Message&apos; in r.columns:
    for j in r.Message:

        if j and j.find(&apos;晚安啦&apos;)!= -1:#注1，关键的一步
            print(&apos;要求的id&apos;,i)#Chat_f2f79f4861cc4168f0600517f5d7521c
            result.append(i)
            break


query4 = &quot;SELECT * FROM %s&quot; %(result[0]) #注1那步完成得好，result就会只有一个元素

meOwn = []
own = pd.read_sql(query4, conn)#过滤一些关键词
if &apos;Message&apos; in own.columns:
    for j in own.Message:
        if j and j.find(&apos;msg&apos;)!=-1:#去掉图片视频信息
                j = &apos;&apos;
        if j and j.find(&apos;[&apos;)!=-1:#去掉表情包
                j = &apos;&apos;
        meOwn.append(j)


# text = pd.read_sql(query4, conn)
# text = list(text.Message) #注2

full_text = &apos;\n&apos;.join(meOwn) #将text这个列表合并成字符串，以回车符分隔
f = open(&apos;./comde&apos;, &apos;w&apos;)
f.write(full_text)
f.close()
</code></pre><p>这时我们点开上边的comde文本，如果不出意外的话，里面就是我们所要的的聊天记录了。</p>
<h2 id="3-生成词云"><a href="#3-生成词云" class="headerlink" title="3.生成词云"></a>3.生成词云</h2><p>这一步相对于要简单一些了，</p>
<pre><code># -*- coding: utf-8 -*-
import matplotlib.pyplot as plt
import pickle
from wordcloud import WordCloud, STOPWORDS, ImageColorGenerator
import jieba
import codecs

text = &apos;&apos;

# yy.txt 是聊天记录的文本文件
with open(&apos;comde&apos;) as fin:
    for line in fin.readlines():
        line = line.strip(&apos;\n&apos;)
        text += &apos; &apos;.join(jieba.cut(line))
        text += &apos; &apos;

# yy.jpg 是图片文件
backgroud_Image = plt.imread(&apos;yy.jpeg&apos;)

wc = WordCloud(background_color=&apos;white&apos;,

               mask=backgroud_Image,
               max_words=400,
               stopwords=STOPWORDS,
               font_path=&apos;/System/Library/Fonts/STHeiti Light.ttc&apos;,  # 设置字体格式
               max_font_size=350,  # 设置字体最大值
               random_state=40  # 设置有多少种随机生成状态，即有多少种配色方案
               )


wc.generate(text)
image_colors = ImageColorGenerator(backgroud_Image)
wc.recolor(color_func = image_colors)

plt.imshow(wc)
plt.axis(&apos;off&apos;)
wc.to_file(&quot;result1.jpg&quot;)
</code></pre><p>好了，到当前文件夹下看一下，是否有一张新的图片，名字是result1.jpg，这里要注意生成的图片名字不能和模版的一样，不然会代替模版图片的。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">


      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/child/2017/04/24/4-24/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="hapii">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://tva1.sinaimg.cn/crop.0.14.750.750.180/005PluWajw8fahgdnankoj30ku0lnjsd.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="不要急，不要怕">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="不要急，不要怕" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/24/4-24/" itemprop="url">
                  4.24
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-04-24T17:52:01+08:00">
                2017-04-24
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2017/04/24/4-24/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/04/24/4-24/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2017/04/24/4-24/" class="leancloud_visitors" data-flag-title="4.24">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="一些絮絮叨叨："><a href="#一些絮絮叨叨：" class="headerlink" title="一些絮絮叨叨："></a>一些絮絮叨叨：</h2><p>###有挺久没有写博客了，4月过的丰富多彩，历经冲动的裸辞，以及交接这半个月的心惊胆战和对未来未知的害怕，稀里糊涂的就过来了，结局皆大欢喜，唯一感觉有点舍不得袁总，一个和蔼的老顽童，以后估计再也不会有这样的老板了，与其说是老板，更不如说是长辈。  哎，过去的已是过去，日子不停的向前跑，要习惯，要习惯这就是生活。20多岁的年纪，不要太安逸，不要急，不要怕。再见，梅地亚<img src="http://i1.piimg.com/567571/28a47af3d1008468.jpg" alt="660"></p>
<p>

</p><h3 id="一时冲动来到北京，至今难忘北京的第一顿饭，火车站旁边25的一碗加州牛肉面，现在想想倒也合理，从大学起就是雷厉风行的，总是走一步再看下一步，没有自己的计划，误打误撞进了程序员这一行，毕竟以前是single-dog一只，乱跑乱撞的对以后也没有个方向。今年很重要！选择很重要-自己的事只能自己拿主意，生活会有一万种方法来调戏你，让你哭让你笑，让你累的体无完肤，偶尔也会给你爽到无法呼吸，路还有很长，要学的不光有技术，还有做人。"><a href="#一时冲动来到北京，至今难忘北京的第一顿饭，火车站旁边25的一碗加州牛肉面，现在想想倒也合理，从大学起就是雷厉风行的，总是走一步再看下一步，没有自己的计划，误打误撞进了程序员这一行，毕竟以前是single-dog一只，乱跑乱撞的对以后也没有个方向。今年很重要！选择很重要-自己的事只能自己拿主意，生活会有一万种方法来调戏你，让你哭让你笑，让你累的体无完肤，偶尔也会给你爽到无法呼吸，路还有很长，要学的不光有技术，还有做人。" class="headerlink" title="一时冲动来到北京，至今难忘北京的第一顿饭，火车站旁边25的一碗加州牛肉面，现在想想倒也合理，从大学起就是雷厉风行的，总是走一步再看下一步，没有自己的计划，误打误撞进了程序员这一行，毕竟以前是single dog一只，乱跑乱撞的对以后也没有个方向。今年很重要！选择很重要!自己的事只能自己拿主意，生活会有一万种方法来调戏你，让你哭让你笑，让你累的体无完肤，偶尔也会给你爽到无法呼吸，路还有很长，要学的不光有技术，还有做人。"></a>一时冲动来到北京，至今难忘北京的第一顿饭，火车站旁边25的一碗加州牛肉面，现在想想倒也合理，从大学起就是雷厉风行的，总是走一步再看下一步，没有自己的计划，误打误撞进了程序员这一行，毕竟以前是single dog一只，乱跑乱撞的对以后也没有个方向。今年很重要！选择很重要!自己的事只能自己拿主意，生活会有一万种方法来调戏你，让你哭让你笑，让你累的体无完肤，偶尔也会给你爽到无法呼吸，路还有很长，要学的不光有技术，还有做人。</h3><p>

</p><h3 id="技术往java发展，生活往稳定了发展，多运动，还有莫辜负了她。"><a href="#技术往java发展，生活往稳定了发展，多运动，还有莫辜负了她。" class="headerlink" title="技术往java发展，生活往稳定了发展，多运动，还有莫辜负了她。"></a>技术往java发展，生活往稳定了发展，多运动，还有莫辜负了她。</h3>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">


      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/child/2017/02/28/学习/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="hapii">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://tva1.sinaimg.cn/crop.0.14.750.750.180/005PluWajw8fahgdnankoj30ku0lnjsd.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="不要急，不要怕">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="不要急，不要怕" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/02/28/学习/" itemprop="url">
                  ffmpeg学习
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-02-28T13:40:58+08:00">
                2017-02-28
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2017/02/28/学习/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/02/28/学习/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2017/02/28/学习/" class="leancloud_visitors" data-flag-title="ffmpeg学习">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>FFmpeg学习笔记，持续更新～～</p>
<h1 id="FFmpeg简介"><a href="#FFmpeg简介" class="headerlink" title="FFmpeg简介:"></a>FFmpeg简介:</h1><p>FFmpeg是一套可以用来记录、转换数字音频、视频，并能将其转化为流的开源计算机程序。采用LGPL或GPL许可证。它提供了录制、转换以及流化音视频的完整解决方案。它包含了非常先进的音频/视频编解码库libavcodec，为了保证高可移植性和编解码质量，libavcodec里很多codec都是从头开发的。<br>FFmpeg在Linux平台下开发，但它同样也可以在其它操作系统环境中编译运行，包括Windows、Mac OS X等。这个项目最早由Fabrice Bellard发起，现在由Michael Niedermayer维护。许多FFmpeg的开发人员都来自MPlayer项目，而且当前FFmpeg也是放在MPlayer项目组的服务器上。项目的名称来自MPEG视频编码标准，前面的”FF”代表”Fast Forward”。</p>
<h1 id="FFmpeg模块"><a href="#FFmpeg模块" class="headerlink" title="FFmpeg模块:"></a>FFmpeg模块:</h1><p>libavformat：用于各种音视频封装格式的生成和解析，包括获取解码所需信息以生成解码上下文结构<br>和读取音视频帧等功能；<br>libavcodec：用于各种类型声音/图像编解码；<br>libavutil：包含一些公共的工具函数；<br>libswscale：用于视频场景比例缩放、色彩映射转换；<br>libpostproc：用于后期效果处理；<br>ffmpeg：该项目提供的一个工具，可用于格式转换、解码或电视卡即时编码等；<br>ffsever：一个 HTTP 多媒体即时广播串流服务器；<br>ffplay：是一个简单的播放器，使用ffmpeg 库解析和解码，通过SDL显示；</p>
<h1 id="H-264编码原理I-B-P帧"><a href="#H-264编码原理I-B-P帧" class="headerlink" title="H.264编码原理I/B/P帧:"></a>H.264编码原理I/B/P帧:</h1><h2 id="I帧"><a href="#I帧" class="headerlink" title="I帧:"></a>I帧:</h2><p>I帧:帧内编码帧 ，I帧表示关键帧，你可以理解为这一帧画面的完整保留；解码时只需要本帧数据就可以完成（因为包含完整画面）<br>I帧特点:</p>
<ol>
<li>它是一个全帧压缩编码帧。它将全帧图像信息进行JPEG压缩编码及传输;<ol>
<li>解码时仅用I帧的数据就可重构完整图像;</li>
<li>I帧描述了图像背景和运动主体的详情;</li>
<li>I帧不需要参考其他画面而生成;</li>
<li>I帧是P帧和B帧的参考帧(其质量直接影响到同组中以后各帧的质量);</li>
<li>I帧是帧组GOP的基础帧(第一帧),在一组中只有一个I帧;</li>
<li>I帧不需要考虑运动矢量;</li>
<li>I帧所占数据的信息量比较大。</li>
</ol>
</li>
</ol>
<h2 id="P帧"><a href="#P帧" class="headerlink" title="P帧:"></a>P帧:</h2><p>P帧:前向预测编码帧。P帧表示的是这一帧跟之前的一个关键帧（或P帧）的差别，解码时需要用之前缓存的画面叠加上本帧定义的差别，生成最终画面。（也就是差别帧，P帧没有完整画面数据，只有与前一帧的画面差别的数据）</p>
<p>P帧的预测与重构:P帧是以I帧为参考帧,在I帧中找出P帧“某点”的预测值和运动矢量,取预测差值和运动矢量一起传送。在接收端根据运动矢量从I帧中找出P帧“某点”的预测值并与差值相加以得到P帧“某点”样值,从而可得到完整的P帧。<br>P帧特点:</p>
<ol>
<li>P帧是I帧后面相隔1~2帧的编码帧;</li>
<li>P帧采用运动补偿的方法传送它与前面的I或P帧的差值及运动矢量(预测误差);</li>
<li>解码时必须将I帧中的预测值与预测误差求和后才能重构完整的P帧图像;</li>
<li>P帧属于前向预测的帧间编码。它只参考前面最靠近它的I帧或P帧;</li>
<li>P帧可以是其后面P帧的参考帧,也可以是其前后的B帧的参考帧;</li>
<li>由于P帧是参考帧,它可能造成解码错误的扩散;</li>
<li>由于是差值传送,P帧的压缩比较高。</li>
</ol>
<h2 id="B帧"><a href="#B帧" class="headerlink" title="B帧:"></a>B帧:</h2><p>B帧:双向预测内插编码帧。B帧是双向差别帧，也就是B帧记录的是本帧与前后帧的差别（具体比较复杂，有4种情况，但我这样说简单些），换言之，要解码B帧，不仅要取得之前的缓存画面，还要解码之后的画面，通过前后画面的与本帧数据的叠加取得最终的画面。B帧压缩率高，但是解码时CPU会比较累。</p>
<p>B帧的预测与重构<br>B帧以前面的I或P帧和后面的P帧为参考帧,“找出”B帧“某点”的预测值和两个运动矢量,并取预测差值和运动矢量传送。接收端根据运动矢量在两个参考帧中“找出(算出)”预测值并与差值求和,得到B帧“某点”样值,从而可得到完整的B帧。<br>B帧特点</p>
<ol>
<li>B帧是由前面的I或P帧和后面的P帧来进行预测的;</li>
<li>B帧传送的是它与前面的I或P帧和后面的P帧之间的预测误差及运动矢量;</li>
<li>B帧是双向预测编码帧;</li>
<li>B帧压缩比最高,因为它只反映丙参考帧间运动主体的变化情况,预测比较准确;</li>
<li>B帧不是参考帧,不会造成解码错误的扩散。</li>
</ol>
<p>注:I、B、P各帧是根据压缩算法的需要，是人为定义的,它们都是实实在在的物理帧。一般来说，I帧的压缩率是7（跟JPG差不多），P帧是20，B帧可以达到50。可见使用B帧能节省大量空间，节省出来的空间可以用来保存多一些I帧，这样在相同码率下，可以提供更好的画质。</p>
<h2 id="h264的压缩方法"><a href="#h264的压缩方法" class="headerlink" title="h264的压缩方法:"></a>h264的压缩方法:</h2><p>1.分组:把几帧图像分为一组(GOP，也就是一个序列),为防止运动变化,帧数不宜取多。<br>2.定义帧:将每组内各帧图像定义为三种类型,即I帧、B帧和P帧;<br>3.预测帧:以I帧做为基础帧,以I帧预测P帧,再由I帧和P帧预测B帧;<br>4.数据传输:最后将I帧数据与预测的差值信息进行存储和传输。<br>        帧内（Intraframe）压缩也称为空间压缩（Spatial compression）。当压缩一帧图像时，仅考虑本帧的数据而不考虑相邻帧之间的冗余信息，这实际上与静态图像压缩类似。帧内一般采用有损压缩算法，由于帧内压缩是编码一个完整的图像，所以可以独立的解码、显示。帧内压缩一般达不到很高的压缩，跟编码jpeg差不多。<br>        帧间（Interframe）压缩的原理是：相邻几帧的数据有很大的相关性，或者说前后两帧信息变化很小的特点。也即连续的视频其相邻帧之间具有冗余信息,根据这一特性，压缩相邻帧之间的冗余量就可以进一步提高压缩量，减小压缩比。帧间压缩也称为时间压缩（Temporal compression），它通过比较时间轴上不同帧之间的数据进行压缩。帧间压缩一般是无损的。帧差值（Frame differencing）算法是一种典型的时间压缩法，它通过比较本帧与相邻帧之间的差异，仅记录本帧与其相邻帧的差值，这样可以大大减少数据量。<br>       顺便说下有损（Lossy ）压缩和无损（Lossy less）压缩。无损压缩也即压缩前和解压缩后的数据完全一致。多数的无损压缩都采用RLE行程编码算法。有损压缩意味着解压缩后的数据与压缩前的数据不一致。在压缩的过程中要丢失一些人眼和人耳所不敏感的图像或音频信息,而且丢失的信息不可恢复。几乎所有高压缩的算法都采用有损压缩,这样才能达到低数据率的目标。丢失的数据率与压缩比有关,压缩比越小，丢失的数据越多,解压缩后的效果一般越差。此外,某些有损压缩算法采用多次重复压缩的方式,这样还会引起额外的数据丢失。</p>
<h1 id="H264-NAL头解析"><a href="#H264-NAL头解析" class="headerlink" title="H264 NAL头解析:"></a>H264 NAL头解析:</h1><h2 id="NAL概述"><a href="#NAL概述" class="headerlink" title="NAL概述:"></a>NAL概述:</h2><p>NAL 全称 Network Abstract Layer,即网络抽象层。在 H.264/AVC 视频编码标准中,整个系统框架被分为 了两个层面:视频编码层面(VCL,Video Coding Layer)和网络抽象层面(NAL,Network Abstraction Layer)。其中,前者负责有效表示视频数据的内容, 而后者则负责格式化数据并提供头信息,以保证数据适合各种信道和存储介质上的传输。 现实中的传输系统是多样化的,其可靠性,服务质量,封装方式等特征各不相同,NAL 这一概念的提出 提供了一个视频编码器和传输系统的友好接口,使得编码后的视频数据能够有效地在各种不同的网络环境 中传输。</p>
<h2 id="NAL-单元"><a href="#NAL-单元" class="headerlink" title="NAL 单元:"></a>NAL 单元:</h2><p>NAL 单元是 NAL 的基本语法结构,它包含一个字节的头信息和一系列来自 VCL 的称为原始字节序列载荷 (RBSP)的字节流。头信息中包含着一个可否丢弃的指示标记,标识着该 NAL 单元的丢弃能否引起错误 扩散,一般,如果 NAL 单元中的信息不用于构建参考图像,则认为可以将其丢弃;最后包含的是 NAL 单 元的类型信息,暗示着其内含有效载荷的内容。 送到解码器端的 NAL 单元必须遵守严格的顺序,如果应 用程序接收到的 NAL 单元处于乱序,则必须提供一种恢复其正确顺序的方法。</p>
<h2 id="NAL-实现编解码器与传输网络的结合"><a href="#NAL-实现编解码器与传输网络的结合" class="headerlink" title="NAL 实现编解码器与传输网络的结合"></a>NAL 实现编解码器与传输网络的结合</h2><p>NAL 提供了一个编解码器与传输网络的通用接口,而对于不同的网络环境,具体的实现方案是不同的。 对于基于流的传输系统如 H.320、MPEG 等,需要按照解码顺序组织 NAL 单元,并为每个 NAL 单元增加 若干比特字节对齐的前缀以形成字节流;对于 RTP/UDP/IP 系统,则可以直接将编码器输出的 NAL 单元 作为 RTP 的有效载荷;而对于同时提供多个逻辑信道的传输系统,甚至可以根据重要性将不同类型的 NAL 单元在不同服务质量的信道中传输。</p>
<h2 id="结论"><a href="#结论" class="headerlink" title="结论:"></a>结论:</h2><p>为了实现编解码器良好的网络适应性,需要做两方面的工作:第一、在 Codec 中将 NAL 这一技术完整而 有效的实现;第二、在遵循 H.264/AVC NAL 规范的前提下设计针对不同网络的最佳传输方案。如果实现 了以上两个目标,所实现的就不仅仅是一种视频编解码技术,而是一套适用范围很广的多媒体传输方案, 该方案适用于如视频会议,数据存储,电视广播,流媒体,无线通信,远程监控等多种领域。</p>
<h2 id="NALU-类型"><a href="#NALU-类型" class="headerlink" title="NALU 类型"></a>NALU 类型</h2><p>如果NALU对应的Slice为一帧的开始，则用4字节表示，即0x00000001；否则用3字节表示，0x000001。<br>NAL Header：forbidden_bit，nal_reference_bit（优先级）2bit，nal_unit_type（类型）5bit。 标识NAL单元中的RBSP数据类型，其中，nal_unit_type为1， 2， 3， 4， 5的NAL单元称为VCL的NAL单元，其他类型的NAL单元为非VCL的NAL单元。<br>0：未规定<br>1：非IDR图像中不采用数据划分的片段<br>2：非IDR图像中A类数据划分片段<br>3：非IDR图像中B类数据划分片段<br>4：非IDR图像中C类数据划分片段<br>5：IDR图像的片段<br>6：补充增强信息（SEI）<br>7：序列参数集（SPS）<br>8：图像参数集（PPS）<br>9：分割符<br>10：序列结束符<br>11：流结束符<br>12：填充数据<br>13：序列参数集扩展<br>14：带前缀的NAL单元<br>15：子序列参数集<br>16 – 18：保留<br>19：不采用数据划分的辅助编码图像片段<br>20：编码片段扩展<br>21 – 23：保留<br>24 – 31：未规定</p>
<h2 id="NAL-在多媒体传输、存储系统中的应用"><a href="#NAL-在多媒体传输、存储系统中的应用" class="headerlink" title="NAL 在多媒体传输、存储系统中的应用:"></a>NAL 在多媒体传输、存储系统中的应用:</h2><p>NAL 的头占用了一个字节,按照比特自高至低排列可以表示如下:<br>0AABBBBB<br>其中,AA 用于表示该 NAL 是否可以丢弃(有无被其后的 NAL 参考),00b 表示没有参考作用,可丢弃,如 B slice、SEI 等,非零——包括 01b、10b、11b——表示该 NAL 不可丢弃,如 SPS、PPS、I Slice、P Slice 等。 常用的 NAL 头的取值如:</p>
<ul>
<li>0x67: SPS</li>
<li>0x68: PPS</li>
<li>0x65: IDR</li>
<li>0x61: non-IDR Slice 0x01: B Slice</li>
<li>0x06: SEI</li>
<li>0x09: AU Delimiter</li>
</ul>
<p>由于 NAL 的语法中没有给出长度信息,实际的传输、存储系统需要增加额外的头实现各个 NAL 单元的定界。 其中,AVI 文件和 MPEG TS 广播流采取的是字节流的语法格式,即在 NAL 单元之前增加 0x00000001 的同步 码,则从 AVI 文件或 MPEG TS PES 包中读出的一个 H.264 视频帧以下面的形式存在:</p>
<ul>
<li>00 00 00 01 06 … 00 00 00 01 67 … 00 00 00 01 68 … 00 00 00 01 65 … </li>
<li>SEI 信息   SPS   PPS   IDR Slice</li>
</ul>
<p>H.264的SPS和PPS串，包含了初始化H.264解码器所需要的信息参数，包括编码所用的profile，level，图像的宽和高，deblock滤波器等。</p>
<p>而对于 MP4 文件,NAL 单元之前没有同步码,却有若干字节的长度码,来表示 NAL 单元的长度,这个长度 码所占用的字节数由 MP4 文件头给出;此外,从 MP4 读出来的视频帧不包含 PPS 和 SPS,这些信息位于 MP4 的文件头中,解析器必须在打开文件的时候就获取它们。从 MP4 文件读出的一个 H.264 帧往往是下面的形式 (假设长度码为 2 字节):</p>
<ul>
<li>00 19 06 [… 25 字节…] 24 aa 65 [… 9386 字节…] </li>
<li>SEI 信息   IDR Slice</li>
</ul>
<p>  视频图像数据有极强的相关性，也就是说有大量的冗余信息。其中冗余信息可分为空域冗余信息和时域冗余信息。压缩技术就是将数据中的冗余信息去掉（去除数据之间的相关性），压缩技术包含帧内图像数据压缩技术、帧间图像数据压缩技术和熵编码压缩技术。视频文件一般涉及到三个参数：帧率、分辨率和码率。</p>
<p>　　帧率：每秒显示的图片数。影响画面流畅度，与画面流畅度成正比：帧率越大，画面越流畅；帧率越小，画面越有跳动感，不流畅。由于人类眼睛的特殊生理结构，如果所看画面之帧率高于16的时候，就会认为是连贯的，此现象称之为视觉暂留。一般是15～20fps ，并且当帧速达到一定数值后，再增长的话，人眼也不容易察觉到有明显的流畅度提升了。</p>
<p>　　分辨率：(矩形)图片的长度和宽度，即图片的尺寸 一般有1280x720(HD) 640x368(VGA) 1920x1080(UHD)<br>　　<br>　　码率：把每秒显示的图片进行压缩后的数据量。影响体积，与体积成正比：码率越大，体积越大；码率越小，体积越小。 （体积=码率×时间）256～512 kb/s </p>
<p>　　帧率X分辨率=压缩前的每秒数据量(单位应该是若干个字节)<br>　　压缩比=压缩前的每秒数据量/码率  （对于同一个视频源并采用同一种视频编码算法，则：压缩比越高，画面质量越差。）</p>
<p>　　所谓“清晰”，是指画面十分细腻，没有马赛克。并不是分辨率越高图像就越清晰。<br>　　简单说：<br>在码率一定的情况下，分辨率与清晰度成反比关系：分辨率越高，图像越不清晰，分辨率越低，图像越清晰。<br>在分辨率一定的情况下，码率与清晰度成正比关系，码率越高，图像越清晰；码率越低，图像越不清晰。<br>　　但是，事实情况却不是这么简单。可以这么说：</p>
<p>在码率一定的情况下，分辨率在一定范围内取值都将是清晰的；同样地，在分辨率一定的情况下，码率在一定范围内取值都将是清晰的。</p>
<p>　　在视频压缩的过程中， I帧是帧内图像数据压缩，是独立帧。而P帧则是参考I帧进行帧间图像数据压缩，不是独立帧。在压缩后的视频中绝大多数都是P帧，故视频质量主要由P帧表现出来。由于P帧不是独立帧，而只是保存了与邻近的I帧的差值，故实际上并不存在分辨率的概念，应该看成一个二进制差值序列。而该二进制序列在使用熵编码压缩技术时会使用量化参数进行有损压缩，视频的质量直接由量化参数决定，而量化参数会直接影响到压缩比和码率。</p>
<p>　　视频质量可以通过主观和客观方式来表现，主观方式就是通常人们提到的视频清晰度，而客观参数则是量化参数或者压缩比或者码率。在视频源一样，压缩算法也一样的前提下比较，量化参数，压缩比和码率之间是有直接的比例关系的。</p>
<p>　　分辨率的变化又称为重新采样。由高分辨率变成低分辨率称为下采样，由于采样前数据充足，只需要尽量保留更多的信息量，一般可以获得相对较好的结果。而由低分辨率变成高分辨率称为上采样，由于需要插值等方法来补充（猜测）缺少的像素点，故必然会带有失真，这就是一种视频质量（清晰度）的损失。</p>
<p>　　</p>
<h2 id="NAL-在多媒体传输、存储系统中的应用-1"><a href="#NAL-在多媒体传输、存储系统中的应用-1" class="headerlink" title="NAL 在多媒体传输、存储系统中的应用:"></a>NAL 在多媒体传输、存储系统中的应用:</h2><p>NAL 的头占用了一个字节,按照比特自高至低排列可以表示如下:<br>0AABBBBB<br>其中,AA 用于表示该 NAL 是否可以丢弃(有无被其后的 NAL 参考),00b 表示没有参考作用,可丢弃,如 B slice、SEI 等,非零——包括 01b、10b、11b——表示该 NAL 不可丢弃,如 SPS、PPS、I Slice、P Slice 等。 常用的 NAL 头的取值如:</p>
<pre><code>0x67: SPS
0x68: PPS
0x65: IDR
0x61: non-IDR Slice 0x01: B Slice
0x06: SEI
0x09: AU Delimiter
</code></pre><p>由于 NAL 的语法中没有给出长度信息,实际的传输、存储系统需要增加额外的头实现各个 NAL 单元的定界。 其中,AVI 文件和 MPEG TS 广播流采取的是字节流的语法格式,即在 NAL 单元之前增加 0x00000001 的同步 码,则从 AVI 文件或 MPEG TS PES 包中读出的一个 H.264 视频帧以下面的形式存在:</p>
<pre><code>00 00 00 01 06 ... 00 00 00 01 67 ... 00 00 00 01 68 ... 00 00 00 01 65 ... 
SEI 信息 SPS PPS IDR Slice
</code></pre><p> 而对于 MP4 文件,NAL 单元之前没有同步码,却有若干字节的长度码,来表示 NAL 单元的长度,这个长度 码所占用的字节数由 MP4 文件头给出;此外,从 MP4 读出来的视频帧不包含 PPS 和 SPS,这些信息位于 MP4 的文件头中,解析器必须在打开文件的时候就获取它们。从 MP4 文件读出的一个 H.264 帧往往是下面的形式 (假设长度码为 2 字节):</p>
<pre><code>00 19 06 [... 25 字节...] 24 aa 65 [... 9386 字节...] 
SEI 信息    IDR Slice
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">


      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/child/2017/02/16/Python学习/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="hapii">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://tva1.sinaimg.cn/crop.0.14.750.750.180/005PluWajw8fahgdnankoj30ku0lnjsd.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="不要急，不要怕">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="不要急，不要怕" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/02/16/Python学习/" itemprop="url">
                  Python学习
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-02-16T13:41:43+08:00">
                2017-02-16
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2017/02/16/Python学习/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/02/16/Python学习/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2017/02/16/Python学习/" class="leancloud_visitors" data-flag-title="Python学习">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>先粘上学习地址,<a href="http://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000/0014316724772904521142196b74a3f8abf93d8e97c6ee6000" target="_blank" rel="external">廖雪峰的博客</a></p>
<h2 id="list-数组"><a href="#list-数组" class="headerlink" title="###list(数组):"></a>###list(数组):</h2><p>Python中的list相当于OC中的数组，一下是一些方法</p>
<pre><code>&gt;&gt;&gt; someWords = [&apos;wq&apos;,&apos;love&apos;,&apos;dan&apos;]
&gt;&gt;&gt; someWords
[&apos;wq&apos;, &apos;love&apos;, &apos;dan&apos;]
</code></pre><p>变量classmates就是一个list。用len()函数可以获得list元素的个数：</p>
<pre><code>&gt;&gt;&gt; len(someWords)
3
</code></pre><p>用索引来访问list中每一个位置的元素，记得索引是从0开始的：</p>
<pre><code>&gt;&gt;&gt; someWords[0]
&apos;wq&apos;
&gt;&gt;&gt; someWords[1]
&apos;love&apos;
&gt;&gt;&gt; someWords[2]
&apos;dan&apos;
&gt;&gt;&gt; someWords[3]
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
IndexError: list index out of range
</code></pre><p>因为自有3个元素，所以取第4个会数组越界，</p>
<p>如果要取最后一个元素，除了计算索引位置外，还可以用-1做索引，直接获取最后一个元素：</p>
<pre><code>&gt;&gt;&gt; someWords[-1]
&apos;dan&apos;
</code></pre><p>以此类推，可以获取倒数第2个、倒数第3个：</p>
<pre><code>&gt;&gt;&gt; someWords[-2]
&apos;love&apos;
&gt;&gt;&gt; someWords[-3]
&apos;wq&apos;
&gt;&gt;&gt; someWords[-4]
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
IndexError: list index out of range
</code></pre><p>当然，倒数第4个就越界了。</p>
<p>list是一个可变的有序表，所以，可以往list中追加元素到末尾：</p>
<pre><code>&gt;&gt;&gt; someWords.append(&apos;too&apos;)
&gt;&gt;&gt; someWords
[&apos;wq&apos;, &apos;love&apos;, &apos;dan&apos;, &apos;too&apos;]
</code></pre><p>也可以把元素插入到指定的位置，比如索引号为1的位置：</p>
<pre><code>&gt;&gt;&gt; someWords.insert(1,&apos;very&apos;)
&gt;&gt;&gt; someWords
[&apos;wq&apos;, &apos;very&apos;, &apos;love&apos;, &apos;dan&apos;, &apos;too&apos;]
</code></pre><p>要删除list末尾的元素，用pop()方法：这里pop函数会返回删除的函数</p>
<pre><code>&gt;&gt;&gt; someWords.pop()
&apos;too&apos;
&gt;&gt;&gt; someWords
[&apos;wq&apos;, &apos;very&apos;, &apos;love&apos;, &apos;dan&apos;]
</code></pre><p>要删除指定位置的元素，用pop(i)方法，其中i是索引位置：</p>
<pre><code>&gt;&gt;&gt; someWords.pop(1)
&apos;very&apos;
&gt;&gt;&gt; someWords
[&apos;wq&apos;, &apos;love&apos;, &apos;dan&apos;]
</code></pre><p>要把某个元素替换成别的元素，可以直接赋值给对应的索引位置：</p>
<pre><code>&gt;&gt;&gt; someWords[0]=&apos;qiang&apos;
&gt;&gt;&gt; someWords
[&apos;qiang&apos;, &apos;love&apos;, &apos;dan&apos;]
</code></pre><p>list里面的元素的数据类型也可以不同，比如：</p>
<pre><code>&gt;&gt;&gt; L = [&apos;Apple&apos;, 123, True]
&gt;&gt;&gt; L
[&apos;Apple&apos;, 123, True]

&gt;&gt;&gt; laguages = [&apos;oc&apos;,[&apos;java&apos;,&apos;php&apos;],&apos;c++&apos;]
&gt;&gt;&gt; laguages
[&apos;oc&apos;, [&apos;java&apos;, &apos;php&apos;], &apos;c++&apos;]
&gt;&gt;&gt; len(laguages)
3
</code></pre><p>要注意laguages只有3个元素，其中s[1]又是一个list，如果拆开写就更容易理解了</p>
<p>如果一个list中一个元素也没有，就是一个空的list，它的长度为0：</p>
<pre><code>&gt;&gt;&gt; L = []
&gt;&gt;&gt; len(L)
0
</code></pre><p>###tuple(元组):<br>—另一种有序列表叫元组：tuple。tuple和list非常类似，但是tuple一旦初始化就不能修改,tuple是(),list是[]：</p>
<pre><code>&gt;&gt;&gt; helloPY = (&apos;hello&apos;,&apos;word&apos;)
&gt;&gt;&gt; helloPY
(&apos;hello&apos;, &apos;word&apos;)
&gt;&gt;&gt; helloPY[0]
&apos;hello&apos;
</code></pre><p>这个tuple不能变了，它也没有append()，insert()这样的方法。其他获取元素的方法和list是一样的，你可以正常地使用helloPY[0]，helloPY[1]，但不能赋值成另外的元素。</p>
<p>不可变的tuple有什么意义？因为tuple不可变，所以代码更安全。如果可能，能用tuple代替list就尽量用tuple。</p>
<p>tuple的陷阱：当你定义一个tuple时，在定义的时候，tuple的元素就必须被确定下来，比如：</p>
<pre><code>&gt;&gt;&gt; t = (1, 2)
&gt;&gt;&gt; t
(1, 2)
</code></pre><p>如果要定义一个空的tuple，可以写成()：</p>
<pre><code>&gt;&gt;&gt; t = ()
&gt;&gt;&gt; t
()
</code></pre><p>但是，要定义一个只有1个元素的tuple，如果你这么定义：</p>
<pre><code>&gt;&gt;&gt; t = (1)
&gt;&gt;&gt; t
1
</code></pre><p>定义的不是tuple，是1这个数！这是因为括号()既可以表示tuple，又可以表示数学公式中的小括号，这就产生了歧义，因此，Python规定，这种情况下，按小括号进行计算，计算结果自然是1。</p>
<p>所以，只有1个元素的tuple定义时必须加一个逗号,，来消除歧义：</p>
<pre><code>&gt;&gt;&gt; t = (1,)
&gt;&gt;&gt; t
(1,)
</code></pre><p>Python在显示只有1个元素的tuple时，也会加一个逗号,，以免你误解成数学计算意义上的括号。</p>
<p>最后来看一个“可变的”tuple：</p>
<pre><code>&gt;&gt;&gt; t = (&apos;a&apos;, &apos;b&apos;, [&apos;A&apos;, &apos;B&apos;])
&gt;&gt;&gt; t[2][0] = &apos;X&apos;
&gt;&gt;&gt; t[2][1] = &apos;Y&apos;
&gt;&gt;&gt; t
(&apos;a&apos;, &apos;b&apos;, [&apos;X&apos;, &apos;Y&apos;])
</code></pre><p>这个tuple定义的时候有3个元素，分别是’a’，’b’和一个list。不是说tuple一旦定义后就不可变了吗？怎么后来又变了？因为指向地址没变，但地址元素变了。</p>
<p>###条件判断:</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">


      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/child/2017/02/08/I-O学习/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="hapii">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://tva1.sinaimg.cn/crop.0.14.750.750.180/005PluWajw8fahgdnankoj30ku0lnjsd.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="不要急，不要怕">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="不要急，不要怕" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/02/08/I-O学习/" itemprop="url">
                  I/O学习
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-02-08T15:12:48+08:00">
                2017-02-08
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2017/02/08/I-O学习/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/02/08/I-O学习/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2017/02/08/I-O学习/" class="leancloud_visitors" data-flag-title="I/O学习">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">


      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/child/2017/01/19/版本更新后删除本地UserDefaluts的方法/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="hapii">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://tva1.sinaimg.cn/crop.0.14.750.750.180/005PluWajw8fahgdnankoj30ku0lnjsd.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="不要急，不要怕">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="不要急，不要怕" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/01/19/版本更新后删除本地UserDefaluts的方法/" itemprop="url">
                  版本更新后删除本地UserDefaluts的方法
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-19T14:16:49+08:00">
                2017-01-19
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2017/01/19/版本更新后删除本地UserDefaluts的方法/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/01/19/版本更新后删除本地UserDefaluts的方法/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2017/01/19/版本更新后删除本地UserDefaluts的方法/" class="leancloud_visitors" data-flag-title="版本更新后删除本地UserDefaluts的方法">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <pre><code>#pragma mark =====判别版本号删除本地userDefault
- (void)compareVison{

NSUserDefaults *userDef = [NSUserDefaults standardUserDefaults];

//本地版本号
NSString* localVersion =  [[NSBundle mainBundle] infoDictionary][@&quot;CFBundleVersion&quot;];

//以版本号为key,存储这个版本号是否是第一次进入
NSString *str = [userDef objectForKey:localVersion];


    if (!str) {//第一次进入
        NBLog(@&quot;重置NSuserDefalt&quot;);

        NSDictionary *dictionary = [userDef dictionaryRepresentation];

        //删除所有元素
        for(NSString* key in [dictionary allKeys]){
            [userDef removeObjectForKey:key];
            [userDef synchronize];
        }

    }else{
        NBLog(@&quot;已经不是第一次进入了，不需要删除NSuserDefalt&quot;);
    }

    //存入本地，以后该版本不会在删除本地数据
    [userDef setObject:@&quot;not first&quot; forKey:localVersion];
    [userDef synchronize];
</code></pre><p>}</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">


      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/child/2017/01/12/算法题/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="hapii">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://tva1.sinaimg.cn/crop.0.14.750.750.180/005PluWajw8fahgdnankoj30ku0lnjsd.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="不要急，不要怕">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="不要急，不要怕" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/01/12/算法题/" itemprop="url">
                  算法题
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-12T09:56:12+08:00">
                2017-01-12
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2017/01/12/算法题/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/01/12/算法题/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2017/01/12/算法题/" class="leancloud_visitors" data-flag-title="算法题">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">


      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/child/2016/12/29/git的使用/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="hapii">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://tva1.sinaimg.cn/crop.0.14.750.750.180/005PluWajw8fahgdnankoj30ku0lnjsd.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="不要急，不要怕">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="不要急，不要怕" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/29/git的使用/" itemprop="url">
                  git的使用
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-29T13:27:02+08:00">
                2016-12-29
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2016/12/29/git的使用/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/12/29/git的使用/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/12/29/git的使用/" class="leancloud_visitors" data-flag-title="git的使用">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Mac下显示或隐藏文件夹:</p>
<pre><code>显示：defaults write com.apple.finder AppleShowAllFiles -bool true
隐藏：defaults write com.apple.finder AppleShowAllFiles -bool false 
重启Finder： killall Finder
</code></pre><p><a href="http://www.cocoachina.com/ios/20140524/8536.html" target="_blank" rel="external">Xcode自带</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">


      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/child/2016/12/28/a静态库的制作/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="hapii">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://tva1.sinaimg.cn/crop.0.14.750.750.180/005PluWajw8fahgdnankoj30ku0lnjsd.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="不要急，不要怕">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="不要急，不要怕" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/28/a静态库的制作/" itemprop="url">
                  静态库的封装
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-28T09:31:47+08:00">
                2016-12-28
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2016/12/28/a静态库的制作/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/12/28/a静态库的制作/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/12/28/a静态库的制作/" class="leancloud_visitors" data-flag-title="静态库的封装">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ol>
<li>静态库和动态库有什么异同？</li>
</ol>
<p>静态库：链接时完整地拷贝至可执行文件中，被多次使用就有多份冗余拷贝。利用静态函数库编译成的文件比较大，因为整个 函数库的所有数据都会被整合进目标代码中，他的优点就显而易见了，即编译后的执行程序不需要外部的函数库支持，因为所有使用的函数都已经被编译进去了。当然这也会成为他的缺点，因为如果静态函数库改变了，那么你的程序必须重新编译。</p>
<p>动态库：链接时不复制，程序运行时由系统动态加载到内存，供程序调用，系统只加载一次，多个程序共用，节省内存。由于函数库没有被整合进你的程序，而是程序运行时动态的申请并调用，所以程序的运行环境中必须提供相应的库。动态函数库的改变并不影响你的程序，所以动态函数库的升级比较方便。</p>
<p>静态库和动态库都是闭源库，只能拿来满足某个功能的使用，不会暴露内部具体的代码信息，而从github上下载的第三方库大多是开源库。</p>
<ol>
<li>这两种库都有哪些文件格式？<br>静态库：.a和.framework (windows:.lib , linux: .a)</li>
</ol>
<p>动态库：.dylib和.framework（系统提供给我们的framework都是动态库！）(windows:.dll , linux: .so)</p>
<p>注意：两者都有framework的格式，但是当你创建一个framework文件时，系统默认是动态库的格式，如果想做成静态库，需要在buildSetting中将Mach-O Type选项设置为Static Library就行了！</p>
<ol>
<li>.a文件和.framework文件的区别？</li>
</ol>
<p>.a是一个纯二进制文件，不能直接拿来使用，需要配合头文件、资源文件一起使用。</p>
<p>将静态库打包的时候，只能打包代码资源，图片、本地json文件和xib等资源文件无法打包进去，使用.a静态库的时候需要三个组成部分：.a文件+需要暴露的头文件+资源文件；</p>
<p>.framework中除了有二进制文件之外还有资源文件，可以拿来直接使用。</p>
<ol>
<li>制作静态库需要注意的几点：</li>
</ol>
<p>注意理解：无论是.a静态库还.framework静态库，我们需要的都是二进制文件+.h+其它资源文件的形式，不同的是，.a本身就是二进制文件，需要我们自己配上.h和其它文件才能使用，而.framework本身已经包含了.h和其它文件，可以直接使用。<br>图片资源的处理：两种静态库，一般都是把图片文件单独的放在一个.bundle文件中，一般.bundle的名字和.a或.framework的名字相同。.bundle文件很好弄，新建一个文件夹，把它改名为.bundle就可以了，右键，显示包内容可以向其中添加图片资源。<br>category是我们实际开发项目中经常用到的，把category打成静态库是没有问题的，但是在用这个静态库的工程中，调用category中的方法时会有找不到该方法的运行时错误（selector not recognized），解决办法是：在使用静态库的工程中配置other linkerflags的值为-ObjC。<br>如果一个静态库很复杂，需要暴露的.h比较多的话，就可以在静态库的内部创建一个.h文件（一般这个.h文件的名字和静态库的名字相同），然后把所有需要暴露出来的.h文件都集中放在这个.h文件中，而那些原本需要暴露的.h都不需要再暴露了，只需要把.h暴露出来就可以了。</p>
<ol>
<li>.framework动态库的主要作用：</li>
</ol>
<p>framework本来是苹果专属的内部提供的动态库文件格式，但是自从2014年WWDC之后，开发者也可以自定义创建framework实现动态更新（绕过apple store审核，从服务器发布更新版本）的功能，这与苹果限定的上架的app必须经过apple store的审核制度是冲突的，所以含有自定义的framework的app是无法在商店上架的，但是如果开发的是企业内部应用，就可以考虑尝试使用动态更新技术来将多个独立的app或者功能模块集成在一个app上面！（笔者开发的就是企业内部使用的app，我们将企业官网中的板块开发成4个独立的app，然后将其改造为framework文件集成在一款平台级的app当中进行使用）</p>
<p>目前 iOS 上的动态更新方案主要有以下 4 种：</p>
<p>HTML 5<br>lua（wax）hotpatch<br>react native<br>framework<br>前面三种都是通过在应用内搭建一个运行环境来实现动态更新（HTML 5 是原生支持），在用户体验、与系统交互上有一定的限制，对开发者的要求也更高（至少得熟悉 lua 或者 js）。</p>
<p>使用 framework 的方式来更新可以不依赖第三方库，使用原生的 OC/Swift 来开发，体验更好，开发成本也更低。</p>
<p>由于 Apple 不希望开发者绕过 App Store 来更新 app，因此只有对于不需要上架的应用，才能以 framework 的方式实现 app 的更新。</p>
<p><a href="https://www.gitbook.com/book/leon_lizi/-framework-/details" target="_blank" rel="external">原文链接，这里讲的很详细</a></p>
<h2 id="如何创建-a"><a href="#如何创建-a" class="headerlink" title="如何创建.a:"></a>如何创建.a:</h2><p><img src="http://p1.bqimg.com/567571/156fe5fd2ae35f46.png" alt="封装.a"><br>创建后我们可以多创建几个类用于试验,<br><img src="http://p1.bqimg.com/567571/39d8ca1608a1622b.png" alt="这里我建了两个类和一个Category"></p>
<p><a href="http://www.jianshu.com/p/43d55ae49f59" target="_blank" rel="external">如何创建.a和farmWork</a></p>
<p>选择要暴漏出来的.h文件，<br><img src="http://p1.bqimg.com/567571/5e136fb37d61b838.png" alt="点加号选择要暴漏的.h"><br>这里上文提到的“如果一个静态库很复杂，需要暴露的.h比较多的话，就可以在静态库的内部创建一个.h文件（一般这个.h文件的名字和静态库的名字相同），然后把所有需要暴露出来的.h文件都集中放在这个.h文件中，而那些原本需要暴露的.h都不需要再暴露了，只需要把.h暴露出来就可以了。”没搞出来，以后有空了再说,感觉如果只暴漏一个.h的话，要省事的多.</p>
<p>修改导出product配置<br><img src="http://upload-images.jianshu.io/upload_images/727768-4188568eec7c43be.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="修改导出product配置"><br>修改编译指令集<br><img src="http://upload-images.jianshu.io/upload_images/727768-717773667126f998.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="修改编译指令集"></p>
<p>在虚拟机上【Command+B】运行，然后右键点击products下的.a文件，这时已经从红色变为黑色的了，show in finder,旁边点击include里的文件夹一层层点开，就是要暴漏的.h,<br>同样的在真机上【Command+B】运行，.a show in finder.</p>
<pre><code>lipo -create 真机下.a地址 虚拟机下.a地址 -output 要放到的地址/.a 名字
</code></pre><p>这里补充一个命令lipo -info xxoo.a ,，查看当前(.a)静态文件是合并过的还是没合并过的呢，即支持哪些平台，lipo的-info参数。</p>
<pre><code>SianMac:Desktop yusian$ lipo -info xxoo.a 
Architectures in the fat file: xxoo.a are: armv7 i386 x86_64 arm64
</code></pre><p>这应该是合并过的静态文件，支持armv7 i386 x86_64 arm64平台,模拟器：iPhone4s~5 : i386 iPhone5s~6plus : x86_64<br>真机：iPhone3gs~4s : armv7 iPhone5~5c : armv7s iPhone5s~6plus : arm64<br>现在腾讯sdk已经不支持了i386了，所以做了qq分享的话，虚拟机上的4s会爆红。</p>
<p>好了，现在.a就已经打包好了，将它和暴漏出的.h文件随便拖到一个新建的项目中,运行后你会发现报错，不要惊慌，这是因为我们的静态库里有Category方法。调用时报错“unrecognized selector send to instance.”。这个算是一个官方的已知bug，详情见苹果文档。简单点说，如果你写了一个静态库并且里面有Category，那你就需要让使用者在他们工程的编译参数”Other Linker Flags”里面添加 “-ObjC “选项。</p>
<p><a href="http://blog.ibireme.com/2013/09/18/create-ios-static-framework/" target="_blank" rel="external">如果报了更多的问题，戳这里</a></p>
<p>再次运行时发现了一个重没见过的错误，source file is not valid utf-8,原来是开始捣鼓时引入了#import “libWQA.a”,这个做法是不对的。。。好了，//掉后再一运行，就好了，第一个.a文件做出来了。</p>
<h2 id="framework静态库的创建"><a href="#framework静态库的创建" class="headerlink" title="framework静态库的创建:"></a>framework静态库的创建:</h2><p>   呼，太阳晒得我好舒服啊，迷了一会～～～没有项目的日子好悠闲啊～～</p>
<p>把farmwork也试了一次，过程和.a差不多，<a href="http://www.jianshu.com/p/43d55ae49f59" target="_blank" rel="external">按他的步骤来就好了，哪天用到了再见招拆招吧！</a>，这里注意修改生成的Mach-O格式，把Dynamic Library修改为Static Libray，把动态库改为静态库，动态库不让上线的，当然如果是企业用的话就无所谓了。</p>
<h2 id="感想"><a href="#感想" class="headerlink" title="感想:"></a>感想:</h2><p>就像是🍎的系统函数一样不给看.m文件一样，只给保留了你需要的函数接口，像一个黑盒子，好像除了sdk什么的方便组件式开发。个人没有必要这么干，又重又容易出问题，除非是一些特别“有含量”的代码，而且这代码还不想让别人看到（坏笑ing）.</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">


      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/child/2016/12/26/网络底层学习/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="hapii">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://tva1.sinaimg.cn/crop.0.14.750.750.180/005PluWajw8fahgdnankoj30ku0lnjsd.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="不要急，不要怕">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="不要急，不要怕" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/26/网络底层学习/" itemprop="url">
                  网络底层学习
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-26T10:47:09+08:00">
                2016-12-26
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2016/12/26/网络底层学习/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/12/26/网络底层学习/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/12/26/网络底层学习/" class="leancloud_visitors" data-flag-title="网络底层学习">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>不要动不动就AFN了，很单纯。</p>
<p>NSURLConnection是苹果提供的原生网络访问类，但是苹果很快会将其废弃，且由NSURLSession(iOS7以后)来替代。目前使用最广泛的第三方网络框架AFNetworking最新版本已弃用了NSURLConnection，但是，不得不承认，有些公司还在用类似ASIHTTPRequest这些经典的网络框架，<br><a href="https://objccn.io/issue-5-4/" target="_blank" rel="external">从 NSURLConnection 到 NSURLSession</a></p>
<p><a href="http://www.cnblogs.com/dongwenbo/p/4306785.html" target="_blank" rel="external">如果要学习ASIHTTPRequest,点这里</a></p>
<p><a href="https://hran.me/archives/afnetworking.html" target="_blank" rel="external">AFNetworking 的简单使用,这里说的很详细,这个一定要看</a></p>
<p><a href="http://www.jianshu.com/p/045cdfdaaf6e" target="_blank" rel="external">NSURLSession的用法</a></p>
<p>NSURLSessionTask和NSURLSession, NSURLSession是为了代替NSURLConnection而设计的。Sessions的所有工作都是通过它的小弟，也就是NSURLSessionTask的对象。可以用block,delegate,或者两者混合来创建task。</p>
<pre><code>@class NSURLSession;
@class NSURLSessionDataTask;                /* DataTask对象接收载荷通过零个或多个委托消息 */
@class NSURLSessionUploadTask;              /* UploadTask objects receive periodic progress updates but do not return a body */
@class NSURLSessionDownloadTask;            /* DownloadTask objects represent an active download to disk.  They can provide resume data when canceled. */
@class NSURLSessionStreamTask;              /* StreamTask objects may be used to create NSInput and NSOutputStreams, or used directly in reading and writing. */
@class NSURLSessionConfiguration;
@protocol NSURLSessionDelegate;

@class NSURLSessionTaskMetrics;
@class NSDateInterval;
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">


      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="http://tva1.sinaimg.cn/crop.0.14.750.750.180/005PluWajw8fahgdnankoj30ku0lnjsd.jpg"
               alt="hapii" />
          <p class="site-author-name" itemprop="name">hapii</p>
          <p class="site-description motion-element" itemprop="description">Stay Hungry. Stay Foolish.</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">39</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">2</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">8</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/hapiii" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/5339381110/profile?topnav=1&wvr=6&is_all=1" target="_blank" title="微博">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  微博
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://www.jianshu.com/users/d746cffd2a58/timeline" target="_blank" title="简书">
                  
                    <i class="fa fa-fw fa-twitter"></i>
                  
                  简书
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.zhihu.com/people/oncezhu/activities" target="_blank" title="知乎">
                  
                    <i class="fa fa-fw fa-twitter"></i>
                  
                  知乎
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">hapii</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"hapii"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    
    <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  








  
  

  

  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("zc81aNb6TWWwuKFCHYYHVEwj-gzGzoHsz", "fzUiJKfzp0BdJLPgoyW4Tf5w");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  


</body>
</html>
